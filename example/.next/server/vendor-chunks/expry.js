"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/expry";
exports.ids = ["vendor-chunks/expry"];
exports.modules = {

/***/ "(ssr)/./node_modules/expry/dist/expry.esm.js":
/*!**********************************************!*\
  !*** ./node_modules/expry/dist/expry.esm.js ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   expry: () => (/* binding */ expry)\n/* harmony export */ });\nfunction _arrayLikeToArray(r, a) {\n  (null == a || a > r.length) && (a = r.length);\n  for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e];\n  return n;\n}\nfunction _createForOfIteratorHelperLoose(r, e) {\n  var t = \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"];\n  if (t) return (t = t.call(r)).next.bind(t);\n  if (Array.isArray(r) || (t = _unsupportedIterableToArray(r)) || e && r && \"number\" == typeof r.length) {\n    t && (r = t);\n    var o = 0;\n    return function () {\n      return o >= r.length ? {\n        done: !0\n      } : {\n        done: !1,\n        value: r[o++]\n      };\n    };\n  }\n  throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\nfunction _extends() {\n  return _extends = Object.assign ? Object.assign.bind() : function (n) {\n    for (var e = 1; e < arguments.length; e++) {\n      var t = arguments[e];\n      for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]);\n    }\n    return n;\n  }, _extends.apply(null, arguments);\n}\nfunction _unsupportedIterableToArray(r, a) {\n  if (r) {\n    if (\"string\" == typeof r) return _arrayLikeToArray(r, a);\n    var t = {}.toString.call(r).slice(8, -1);\n    return \"Object\" === t && r.constructor && (t = r.constructor.name), \"Map\" === t || \"Set\" === t ? Array.from(r) : \"Arguments\" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0;\n  }\n}\n\nfunction assert(value, check, message) {\n  if (check.some(function (check) {\n    return check(value);\n  })) return;\n  throw new Error(message);\n}\nfunction isNumber(value) {\n  return typeof value === \"number\";\n}\nfunction isString(value) {\n  return typeof value === \"string\";\n}\nfunction isBoolean(value) {\n  return typeof value === \"boolean\";\n}\nfunction isArray(value) {\n  return Array.isArray(value);\n}\nfunction isObject(value) {\n  return value !== null && typeof value === \"object\" && !Array.isArray(value);\n}\nfunction isArrayOfType(check) {\n  return function (value) {\n    return Array.isArray(value) && value.every(function (item) {\n      return check.some(function (check) {\n        return check(item);\n      });\n    });\n  };\n}\n\nvar arithmetic = {\n  /**\r\n   * Returns the absolute value of a number.\r\n   *\r\n   * @param args The number (expression evaluating to a number).\r\n   * @param vars The variables.\r\n   *\r\n   * @returns The absolute value of the number.\r\n   *\r\n   * @example $abs(-5) // 5\r\n   * @example $abs(5) // 5\r\n   */\n  $abs: function $abs(args, vars) {\n    var number = expry(args, vars);\n    assert(number, [isNumber], \"The $abs operator requires a number as argument.\");\n    return Math.abs(number);\n  },\n  /**\r\n   * Adds numbers together.\r\n   *\r\n   * @param args The numbers (expressions evaluating to numbers).\r\n   * @param vars The variables.\r\n   *\r\n   * @returns The sum of the numbers.\r\n   *\r\n   * @example $add([1, 2, 3]) // 6\r\n   * @example $add([1, 2, 3, 4]) // 10\r\n   */\n  $add: function $add(args, vars) {\n    return args.reduce(function (acc, expr) {\n      var number = expry(expr, vars);\n      assert(number, [isNumber], \"The $add operator requires numbers as arguments.\");\n      return acc + number;\n    }, 0);\n  },\n  /**\r\n   * Returns the smallest integer greater than or equal to the specified number.\r\n   *\r\n   * @param args The number (expression evaluating to a number).\r\n   * @param vars The variables.\r\n   *\r\n   * @returns The smallest integer greater than or equal to the number.\r\n   *\r\n   * @example $ceil(5.5) // 6\r\n   * @example $ceil(5.1) // 6\r\n   */\n  $ceil: function $ceil(args, vars) {\n    var number = expry(args, vars);\n    assert(number, [isNumber], \"The $ceil operator requires a number as argument.\");\n    return Math.ceil(number);\n  },\n  /**\r\n   * Divides one number by another.\r\n   *\r\n   * @param args The dividend and divisor (expressions evaluating to numbers).\r\n   * @param vars The variables.\r\n   *\r\n   * @returns The result of dividing the dividend by the divisor.\r\n   *\r\n   * @example $divide([10, 2]) // 5\r\n   * @example $divide([10, 3]) // 3.3333333333333335\r\n   */\n  $divide: function $divide(args, vars) {\n    var number1 = expry(args[0], vars);\n    assert(number1, [isNumber], \"The $divide operator requires numbers as arguments.\");\n    var number2 = expry(args[1], vars);\n    assert(number2, [isNumber], \"The $divide operator requires numbers as arguments.\");\n    return number1 / number2;\n  },\n  /**\r\n   * Raises Euler's number to the specified exponent.\r\n   *\r\n   * @param args The number (expression evaluating to a number).\r\n   * @param vars The variables.\r\n   *\r\n   * @returns Euler's number raised to the specified power.\r\n   *\r\n   * @example $exp(1) // 2.718281828459045\r\n   * @example $exp(2) // 7.3890560989306495\r\n   */\n  $exp: function $exp(args, vars) {\n    var number = expry(args, vars);\n    assert(number, [isNumber], \"The $exp operator requires a number as argument.\");\n    return Math.exp(number);\n  },\n  /**\r\n   * Returns the largest integer less than or equal to the specified number.\r\n   *\r\n   * @param args The number (expression evaluating to a number).\r\n   * @param vars The variables.\r\n   *\r\n   * @returns The largest integer less than or equal to the number.\r\n   *\r\n   * @example $floor(5.5) // 5\r\n   * @example $floor(5.1) // 5\r\n   */\n  $floor: function $floor(args, vars) {\n    var number = expry(args, vars);\n    assert(number, [isNumber], \"The $floor operator requires a number as argument.\");\n    return Math.floor(number);\n  },\n  /**\r\n   * Returns the natural logarithm of a number.\r\n   *\r\n   * @param args The number (expression evaluating to a number).\r\n   * @param vars The variables.\r\n   *\r\n   * @returns The natural logarithm of the number.\r\n   *\r\n   * @example $ln(1) // 0\r\n   * @example $ln(2.718281828459045) // 1\r\n   */\n  $ln: function $ln(args, vars) {\n    var number = expry(args, vars);\n    assert(number, [isNumber], \"The $ln operator requires a number as argument.\");\n    return Math.log(number);\n  },\n  /**\r\n   * Returns the logarithm of a number in a specified base.\r\n   *\r\n   * @param args The number and base (expressions evaluating to numbers).\r\n   * @param vars The variables.\r\n   *\r\n   * @returns The logarithm of the number in the specified base.\r\n   *\r\n   * @example $log([10, 10]) // 1\r\n   * @example $log([100, 10]) // 2\r\n   */\n  $log: function $log(args, vars) {\n    var number1 = expry(args[0], vars);\n    assert(number1, [isNumber], \"The $log operator requires numbers as arguments.\");\n    var number2 = expry(args[1], vars);\n    assert(number2, [isNumber], \"The $log operator requires numbers as arguments.\");\n    return Math.log(number1) / Math.log(number2);\n  },\n  /**\r\n   * Returns the base 10 logarithm of a number.\r\n   *\r\n   * @param args The number (expression evaluating to a number).\r\n   * @param vars The variables.\r\n   *\r\n   * @returns The base 10 logarithm of the number.\r\n   *\r\n   * @example $log10(1) // 0\r\n   * @example $log10(10) // 1\r\n   */\n  $log10: function $log10(args, vars) {\n    var number = expry(args, vars);\n    assert(number, [isNumber], \"The $log10 operator requires a number as argument.\");\n    return Math.log10(number);\n  },\n  /**\r\n   * Returns the remainder of dividing one number by another.\r\n   *\r\n   * @param args The dividend and divisor (expressions evaluating to numbers).\r\n   * @param vars The variables.\r\n   *\r\n   * @returns The remainder of dividing the dividend by the divisor.\r\n   *\r\n   * @example $mod([10, 3]) // 1\r\n   * @example $mod([10, 2]) // 0\r\n   */\n  $mod: function $mod(args, vars) {\n    var number1 = expry(args[0], vars);\n    assert(number1, [isNumber], \"The $mod operator requires numbers as arguments.\");\n    var number2 = expry(args[1], vars);\n    assert(number2, [isNumber], \"The $mod operator requires numbers as arguments.\");\n    return number1 % number2;\n  },\n  /**\r\n   * Multiplies numbers together.\r\n   *\r\n   * @param args The numbers (expressions evaluating to numbers).\r\n   * @param vars The variables.\r\n   *\r\n   * @returns The product of the numbers.\r\n   *\r\n   * @example $multiply([1, 2, 3]) // 6\r\n   */\n  $multiply: function $multiply(args, vars) {\n    return args.reduce(function (acc, expr) {\n      var number = expry(expr, vars);\n      assert(number, [isNumber], \"The $multiply operator requires numbers as arguments.\");\n      return acc * number;\n    }, 1);\n  },\n  /**\r\n   * Raises a number to the specified exponent.\r\n   *\r\n   * @param args The base and exponent (expressions evaluating to numbers).\r\n   * @param vars The variables.\r\n   *\r\n   * @returns The base raised to the specified power.\r\n   *\r\n   * @example $pow([2, 3]) // 8\r\n   * @example $pow([3, 2]) // 9\r\n   */\n  $pow: function $pow(args, vars) {\n    var number1 = expry(args[0], vars);\n    assert(number1, [isNumber], \"The $pow operator requires numbers as arguments.\");\n    var number2 = expry(args[1], vars);\n    assert(number2, [isNumber], \"The $pow operator requires numbers as arguments.\");\n    return Math.pow(number1, number2);\n  },\n  /**\r\n   * Rounds a number to the nearest integer.\r\n   *\r\n   * @param args The number and the number of decimal places (expressions evaluating to numbers).\r\n   * @param vars The variables.\r\n   *\r\n   * @returns The number rounded to the nearest number with the specified number of decimal places.\r\n   *\r\n   * @example $round([5.5, 0]) // 6\r\n   * @example $round([5.5, 1]) // 5.5\r\n   */\n  $round: function $round(args, vars) {\n    var number = expry(args[0], vars);\n    assert(number, [isNumber], \"The $round operator requires numbers as arguments.\");\n    var places = expry(args[1], vars);\n    assert(places, [isNumber], \"The $round operator requires numbers as arguments.\");\n    var factor = Math.pow(10, places);\n    return Math.round(number * factor) / factor;\n  },\n  /**\r\n   * Returns the square root of a number.\r\n   *\r\n   * @param args The number (expression evaluating to a number).\r\n   * @param vars The variables.\r\n   *\r\n   * @returns The square root of the number.\r\n   *\r\n   * @example $sqrt(4) // 2\r\n   * @example $sqrt(9) // 3\r\n   */\n  $sqrt: function $sqrt(args, vars) {\n    var number = expry(args, vars);\n    assert(number, [isNumber], \"The $sqrt operator requires a number as argument.\");\n    return Math.sqrt(number);\n  },\n  /**\r\n   * Subtracts one number from another.\r\n   *\r\n   * @param args The minuend and subtrahend (expressions evaluating to numbers).\r\n   * @param vars The variables.\r\n   *\r\n   * @returns The result of subtracting the subtrahend from the minuend.\r\n   *\r\n   * @example $subtract([5, 3]) // 2\r\n   * @example $subtract([3, 5]) // -2\r\n   */\n  $subtract: function $subtract(args, vars) {\n    var number1 = expry(args[0], vars);\n    assert(number1, [isNumber], \"The $subtract operator requires numbers as arguments.\");\n    var number2 = expry(args[1], vars);\n    assert(number2, [isNumber], \"The $subtract operator requires numbers as arguments.\");\n    return number1 - number2;\n  },\n  /**\r\n   * Truncates a number to the specified number of decimal places.\r\n   *\r\n   * @param args The number and the number of decimal places (expressions evaluating to numbers).\r\n   * @param vars The variables.\r\n   *\r\n   * @returns The number truncated to the specified number of decimal places.\r\n   *\r\n   * @example $trunc(5.5) // 5\r\n   * @example $trunc(5.5, 1) // 5.5\r\n   */\n  $trunc: function $trunc(args, vars) {\n    var number = expry(args[0], vars);\n    assert(number, [isNumber], \"The $trunc operator requires numbers as arguments.\");\n    var places = expry(args[1], vars);\n    assert(places, [isNumber], \"The $trunc operator requires numbers as arguments.\");\n    var factor = Math.pow(10, places);\n    return Math.trunc(number * factor) / factor;\n  }\n};\n\nvar array = {\n  /**\r\n   * Returns the element at the specified index in an array.\r\n   *\r\n   * @param args The array and the index (expressions evaluating to an array and a number).\r\n   * @param vars The variables.\r\n   *\r\n   * @returns The element at the specified index in the array.\r\n   *\r\n   * @example $arrayElemAt([1, 2, 3], 0) // 1\r\n   * @example $arrayElemAt([1, 2, 3], 1) // 2\r\n   * @example $arrayElemAt([1, 2, 3], 3) // null\r\n   */\n  $arrayElemAt: function $arrayElemAt(args, vars) {\n    var array = expry(args[0], vars);\n    assert(array, [isArray], \"The $arrayElemAt operator requires an array as the first argument.\");\n    var index = expry(args[1], vars);\n    assert(index, [isNumber], \"The $arrayElemAt operator requires a number as the second argument.\");\n    if (index < 0 || index >= array.length) return null;\n    return array[index];\n  },\n  /**\r\n   * Returns the concatenation of arrays.\r\n   *\r\n   * @param args The arrays (expressions evaluating to arrays).\r\n   * @param vars The variables.\r\n   *\r\n   * @returns The concatenation of the arrays.\r\n   *\r\n   * @example $concatArrays([[1, 2], [3, 4]]) // [1, 2, 3, 4]\r\n   * @example $concatArrays([['hello', ' '], ['world']]) // ['hello', ' ', 'world']\r\n   * @example $concatArrays([['hello', ' '], [['world']]]) // ['hello', ' ', ['world']]\r\n   */\n  $concatArrays: function $concatArrays(args, vars) {\n    return args.reduce(function (acc, expr) {\n      var array = expry(expr, vars);\n      assert(array, [isArray], \"The $concatArrays operator requires arrays as arguments.\");\n      return acc.concat(array);\n    }, []);\n  },\n  /**\r\n   * Returns a subset of an array based on the specified condition.\r\n   *\r\n   * @param args The array, the condition, and the variable name (expressions evaluating to an array, a boolean, and a string).\r\n   * @param vars The variables.\r\n   *\r\n   * @returns The subset of the array.\r\n   *\r\n   * @example $filter({ input: [1, 2, 3, 4], as: 'num', cond: { $gt: ['$$num', 2] } }) // [3, 4]\r\n   */\n  $filter: function $filter(args, vars) {\n    var array = expry(args.input, vars);\n    assert(array, [isArray], \"The $filter operator requires an array as the input argument.\");\n    var as = expry(args.as, vars);\n    assert(as, [isString], \"The $filter operator requires a string as the as argument.\");\n    return array.filter(function (value) {\n      var _extends2;\n      return expry(args.cond, _extends({}, vars, (_extends2 = {}, _extends2[\"$\" + as] = value, _extends2)));\n    });\n  },\n  /**\r\n   * Returns a specified number of elements from the beginning of an array.\r\n   *\r\n   * @param args The array and the number of elements (expressions evaluating to an array and a number).\r\n   * @param vars The variables.\r\n   *\r\n   * @returns The specified number of elements from the beginning of the array.\r\n   *\r\n   * @example $firstN({ n: 2, input: [1, 2, 3] }) // [1, 2]\r\n   * @example $firstN({ n: 3, input: [1, 2] } }) // [1, 2]\r\n   * @example $firstN({ n: 2, input: [1] } }) // [1]\r\n   */\n  $firstN: function $firstN(args, vars) {\n    var array = expry(args.input, vars);\n    assert(array, [isArray], \"The $firstN operator requires an array as the input argument.\");\n    var n = expry(args.n, vars);\n    assert(n, [isNumber], \"The $firstN operator requires a number as the n argument.\");\n    return array.slice(0, n);\n  },\n  /**\r\n   * Returns a boolean indicating whether a value is in an array.\r\n   *\r\n   * @param args The value and the array (expressions evaluating to any type and an array).\r\n   * @param vars The variables.\r\n   *\r\n   * @returns A boolean indicating whether the value is in the array.\r\n   *\r\n   * @example $in({ $in: [2, [1, 2, 3]] }) // true\r\n   * @example $in({ $in: [4, [1, 2, 3]] }) // false\r\n   * @example $in({ $in: ['world', ['hello', 'world']] }) // true\r\n   */\n  $in: function $in(args, vars) {\n    var value = expry(args[0], vars);\n    var array = expry(args[1], vars);\n    assert(array, [isArray], \"The $in operator requires an array as the second argument.\");\n    return array.includes(value);\n  },\n  /**\r\n   * Returns the index of the first occurrence of a value in an array. If the value is not in the array, it returns -1.\r\n   *\r\n   * @param args The value and the array (expressions evaluating to any type and an array).\r\n   * @param vars The variables.\r\n   *\r\n   * @returns The index of the first occurrence of the value in the array.\r\n   *\r\n   * @example $indexOfArray([['a', 'abc'], 'a']) // 0\r\n   * @example $indexOfArray([[1, 2], 5]) // -1\r\n   */\n  $indexOfArray: function $indexOfArray(args, vars) {\n    var array = expry(args[0], vars);\n    assert(array, [isArray], \"The $indexOfArray operator requires an array as the first argument.\");\n    var value = expry(args[1], vars);\n    return array.indexOf(value);\n  },\n  /**\r\n   * Returns a specified number of elements from the end of an array.\r\n   *\r\n   * @param args The array and the number of elements (expressions evaluating to an array and a number).\r\n   * @param vars The variables.\r\n   *\r\n   * @returns The specified number of elements from the end of the array.\r\n   *\r\n   * @example $lastN({ n: 2, input: [1, 2, 3] }) // [2, 3]\r\n   * @example $lastN({ n: 3, input: [1, 2] } }) // [1, 2]\r\n   * @example $lastN({ n: 2, input: [1] } }) // [1]\r\n   */\n  $lastN: function $lastN(args, vars) {\n    var array = expry(args.input, vars);\n    assert(array, [isArray], \"The $lastN operator requires an array as the input argument.\");\n    var n = expry(args.n, vars);\n    assert(n, [isNumber], \"The $lastN operator requires a number as the n argument.\");\n    return array.slice(-n);\n  },\n  /**\r\n   * Applies a specified expression to each element of an array and returns the result.\r\n   *\r\n   * @param args The array, the variable name, and the expression (expressions evaluating to an array, a string, and any type).\r\n   * @param vars The variables.\r\n   *\r\n   * @returns The result of applying the expression to each element of the array.\r\n   *\r\n   * @example $map({ input: [1, 2, 3], as: 'num', in: { $add: ['$$num', 1] } }) // [2, 3, 4]\r\n   * @example $map({ input: ['a', 'b'], as: 'str', in: { $toUpper: '$$str' } }) // ['A', 'B']\r\n   */\n  $map: function $map(args, vars) {\n    var array = expry(args.input, vars);\n    assert(array, [isArray], \"The $map operator requires an array as the input argument.\");\n    var as = expry(args.as, vars);\n    assert(as, [isString], \"The $map operator requires a string as the as argument.\");\n    return array.map(function (value) {\n      var _extends3;\n      return expry(args[\"in\"], _extends({}, vars, (_extends3 = {}, _extends3[\"$\" + as] = value, _extends3)));\n    });\n  },\n  /**\r\n   * Returns the largest values in an array.\r\n   *\r\n   * @param args The array and the number of values (expressions evaluating to an array and a number).\r\n   * @param vars The variables.\r\n   *\r\n   * @returns The largest values in the array.\r\n   *\r\n   * @example $maxN({ n: 2, input: [3, 7, 2, 4] } }) // [7, 4]\r\n   * @example $maxN({ n: 3, input: [3, 7, 2, 4] } }) // [7, 4, 3]\r\n   * @example $maxN({ n: 5, input: [3, 7, 2, 4] } }) // [7, 4, 3, 2]\r\n   */\n  $maxN: function $maxN(args, vars) {\n    var array = expry(args.input, vars);\n    assert(array, [isArrayOfType([isNumber]), isArrayOfType([isString])], \"The $maxN operator requires an array of numbers or an array of strings as the input argument.\");\n    var n = expry(args.n, vars);\n    assert(n, [isNumber], \"The $maxN operator requires a number as the n argument.\");\n    return array.sort(function (a, b) {\n      return b > a ? 1 : -1;\n    }).slice(0, n);\n  },\n  /**\r\n   * Returns the smallest values in an array.\r\n   *\r\n   * @param args The array and the number of values (expressions evaluating to an array and a number).\r\n   * @param vars The variables.\r\n   *\r\n   * @returns The smallest values in the array.\r\n   *\r\n   * @example $minN({ n: 2, input: [3, 7, 2, 4] } }) // [2, 3]\r\n   * @example $minN({ n: 3, input: [3, 7, 2, 4] } }) // [2, 3, 4]\r\n   * @example $minN({ n: 5, input: [3, 7, 2, 4] } }) // [2, 3, 4, 7]\r\n   */\n  $minN: function $minN(args, vars) {\n    var array = expry(args.input, vars);\n    assert(array, [isArrayOfType([isNumber]), isArrayOfType([isString])], \"The $minN operator requires an array of numbers or an array of strings as the input argument.\");\n    var n = expry(args.n, vars);\n    assert(n, [isNumber], \"The $minN operator requires a number as the n argument.\");\n    return array.sort(function (a, b) {\n      return a > b ? 1 : -1;\n    }).slice(0, n);\n  },\n  /**\r\n   * Accumulates the elements of an array using an expression and returns the result.\r\n   *\r\n   * @param args The array, the initial value, and the expression (expressions evaluating to an array, any type, and any type).\r\n   * @param vars The variables.\r\n   *\r\n   * @returns The result of accumulating the elements of the array.\r\n   *\r\n   * @example $reduce({ input: ['a', 'b', 'c'], initialValue: '', in: { $concat: ['$$value', '$$this'] } }) // 'abc'\r\n   * @example $reduce({ input: [1, 2, 3], initialValue: 0, in: { $add: ['$$value', '$$this'] } } }) // 6\r\n   */\n  $reduce: function $reduce(args, vars) {\n    var array = expry(args.input, vars);\n    assert(array, [isArray], \"The $reduce operator requires an array as the input argument.\");\n    var initialValue = expry(args.initialValue, vars);\n    return array.reduce(function (acc, value) {\n      return expry(args[\"in\"], _extends({}, vars, {\n        $value: acc,\n        $this: value\n      }));\n    }, initialValue);\n  },\n  /**\r\n   * Reverses the elements of an array.\r\n   *\r\n   * @param args The array (expression evaluating to an array).\r\n   * @param vars The variables.\r\n   *\r\n   * @returns The reversed array.\r\n   *\r\n   * @example $reverseArray([4, 2, 3]) // [3, 2, 4]\r\n   * @example $reverseArray(['a', 'c', 'b']) // ['b', 'c', 'a']\r\n   */\n  $reverseArray: function $reverseArray(args, vars) {\n    var array = expry(args, vars);\n    assert(array, [isArray], \"The $reverseArray operator requires an array as argument.\");\n    return array.reverse();\n  },\n  /**\r\n   * Returns the number of elements in an array.\r\n   *\r\n   * @param args The array (expression evaluating to an array).\r\n   * @param vars The variables.\r\n   *\r\n   * @returns The number of elements in the array.\r\n   *\r\n   * @example $size([1, 2, 3]) // 3\r\n   * @example $size(['a', 'b', 'c', 'd']) // 4\r\n   * @example $size([]) // 0\r\n   */\n  $size: function $size(args, vars) {\n    var array = expry(args, vars);\n    assert(array, [isArray], \"The $size operator requires an array as argument.\");\n    return array.length;\n  },\n  /**\r\n   * Returns a subset of an array.\r\n   *\r\n   * @param args The array, the starting index, and the number of elements (expressions evaluating to an array, a number, and a number).\r\n   * @param vars The variables.\r\n   *\r\n   * @returns The subset of the array.\r\n   *\r\n   * @example $slice([[1, 2, 3], 1, 1]) // [2]\r\n   * @example $slice([[1, 2, 3], 1, 2]) // [2, 3]\r\n   * @example $slice([[1, 2, 3], 1, 3]) // [2, 3]\r\n   * @example $slice([[1, 2, 3], 3, 2]) // []\r\n   */\n  $slice: function $slice(args, vars) {\n    var array = expry(args[0], vars);\n    assert(array, [isArray], \"The $slice operator requires an array as the first argument.\");\n    var position = expry(args[1], vars);\n    assert(position, [isNumber], \"The $slice operator requires a number as the second argument.\");\n    var n = expry(args[2], vars);\n    assert(n, [isNumber], \"The $slice operator requires a number as the third argument.\");\n    return array.slice(position, position + n);\n  },\n  /**\r\n   * Sorts the elements of an array.\r\n   *\r\n   * @param args The array and the expression to sort by (expressions evaluating to an array and a number).\r\n   * @param vars The variables.\r\n   *\r\n   * @returns The sorted array.\r\n   *\r\n   * @example $sortArray({ input: [3, 4, 2], sortBy: { $cmp: ['$$first', '$$second'] } }) // [2, 3, 4]\r\n   * @example $sortArray({ input: [3, 4, 2], sortBy: { $cmp: ['$$second', '$$first'] } }) // [4, 3, 2]\r\n   */\n  $sortArray: function $sortArray(args, vars) {\n    var array = expry(args.input, vars);\n    assert(array, [isArray], \"The $sortArray operator requires an array as the input argument.\");\n    return array.sort(function (a, b) {\n      var variables = _extends({}, vars, {\n        $first: a,\n        $second: b\n      });\n      var number = expry(args.sortBy, variables);\n      assert(number, [isNumber], \"The $sortArray operator requires a number as the sortBy argument.\");\n      return number;\n    });\n  }\n};\n\nvar _boolean = {\n  /**\r\n   * Evaluates one or more expressions and returns true if all of the expressions are true. Otherwise, it returns false.\r\n   *\r\n   * @param args An array of booleans (expressions evaluating to booleans).\r\n   * @param vars The variables.\r\n   *\r\n   * @returns True if all of the expressions are true. Otherwise, false.\r\n   *\r\n   * @example $and([true, true, true]) // true\r\n   * @example $and([true, false, true]) // false\r\n   */\n  $and: function $and(args, vars) {\n    return args.every(function (expr) {\n      var _boolean2 = expry(expr, vars);\n      assert(_boolean2, [isBoolean], \"The $and operator requires booleans as arguments.\");\n      return _boolean2;\n    });\n  },\n  /**\r\n   * Evaluates a boolean and returns the opposite boolean value.\r\n   *\r\n   * @param args A boolean (expression evaluating to a boolean).\r\n   * @param vars The variables.\r\n   *\r\n   * @returns The opposite boolean value.\r\n   *\r\n   * @example $not(true) // false\r\n   * @example $not(false) // true\r\n   */\n  $not: function $not(args, vars) {\n    var _boolean3 = expry(args, vars);\n    assert(_boolean3, [isBoolean], \"The $not operator requires a boolean as argument.\");\n    return !_boolean3;\n  },\n  /**\r\n   * Evaluates one or more expressions and returns true if any of the expressions are true. Otherwise, it returns false.\r\n   *\r\n   * @param args An array of booleans (expressions evaluating to booleans).\r\n   * @param vars The variables.\r\n   *\r\n   * @returns True if any of the expressions are true. Otherwise, false.\r\n   *\r\n   * @example $or([true, false, true]) // true\r\n   * @example $or([false, false, false]) // false\r\n   */\n  $or: function $or(args, vars) {\n    return args.some(function (expr) {\n      var _boolean4 = expry(expr, vars);\n      assert(_boolean4, [isBoolean], \"The $or operator requires booleans as arguments.\");\n      return _boolean4;\n    });\n  }\n};\n\nvar comparison = {\n  /**\r\n   * Compares two values and returns -1 if the first is less than the second, 1 if the first is greater than the second, and 0 if the two values are equal.\r\n   *\r\n   * @param args An array of two values (expressions evaluating to strings or numbers).\r\n   * @param vars The variables.\r\n   *\r\n   * @returns The result of comparing the two values.\r\n   *\r\n   * @example $cmp([3, 5]) // -1\r\n   * @example $cmp([5, 3]) // 1\r\n   * @example $cmp([3, 3]) // 0\r\n   */\n  $cmp: function $cmp(args, vars) {\n    var values = [expry(args[0], vars), expry(args[1], vars)];\n    assert(values, [isArrayOfType([isNumber]), isArrayOfType([isString])], \"The $cmp operator requires two numbers or two strings as arguments.\");\n    return values[0] < values[1] ? -1 : values[0] > values[1] ? 1 : 0;\n  },\n  /**\r\n   * Compares two values and returns true if they are equal. Otherwise, it returns false.\r\n   *\r\n   * @param args An array of two values (expressions evaluating to any types).\r\n   * @param vars The variables.\r\n   *\r\n   * @returns True if the two values are equal. Otherwise, false.\r\n   *\r\n   * @example $eq([3, 3]) // true\r\n   * @example $eq(['hello', 'bye']) // false\r\n   */\n  $eq: function $eq(args, vars) {\n    var a = expry(args[0], vars);\n    var b = expry(args[1], vars);\n    return a === b;\n  },\n  /**\r\n   * Compares two values and returns true if the first is greater than the second. Otherwise, it returns false.\r\n   *\r\n   * @param args An array of two values (expressions evaluating to strings or numbers).\r\n   * @param vars The variables.\r\n   *\r\n   * @returns True if the first value is greater than the second. Otherwise, false.\r\n   *\r\n   * @example $gt([5, 3]) // true\r\n   * @example $gt([3, 5]) // false\r\n   * @example $gt([3, 3]) // false\r\n   */\n  $gt: function $gt(args, vars) {\n    var a = expry(args[0], vars);\n    var b = expry(args[1], vars);\n    return a > b;\n  },\n  /**\r\n   * Compares two values and returns true if the first is greater than or equal to the second. Otherwise, it returns false.\r\n   *\r\n   * @param args An array of two values (expressions evaluating to strings or numbers).\r\n   * @param vars The variables.\r\n   *\r\n   * @returns True if the first value is greater than or equal to the second. Otherwise, false.\r\n   *\r\n   * @example $gte([5, 3]) // true\r\n   * @example $gte([3, 5]) // false\r\n   * @example $gte([3, 3]) // true\r\n   */\n  $gte: function $gte(args, vars) {\n    var values = [expry(args[0], vars), expry(args[1], vars)];\n    assert(values, [isArrayOfType([isNumber]), isArrayOfType([isString])], \"The $gte operator requires two numbers or two strings as arguments.\");\n    return values[0] >= values[1];\n  },\n  /**\r\n   * Compares two values and returns true if the first is less than the second. Otherwise, it returns false.\r\n   *\r\n   * @param args An array of two values (expressions evaluating to strings or numbers).\r\n   * @param vars The variables.\r\n   *\r\n   * @returns True if the first value is less than the second. Otherwise, false.\r\n   *\r\n   * @example $lt([3, 5]) // true\r\n   * @example $lt([5, 3]) // false\r\n   * @example $lt([3, 3]) // false\r\n   */\n  $lt: function $lt(args, vars) {\n    var values = [expry(args[0], vars), expry(args[1], vars)];\n    assert(values, [isArrayOfType([isNumber]), isArrayOfType([isString])], \"The $lt operator requires two numbers or two strings as arguments.\");\n    return values[0] < values[1];\n  },\n  /**\r\n   * Compares two values and returns true if the first is less than or equal to the second. Otherwise, it returns false.\r\n   *\r\n   * @param args An array of two values (expressions evaluating to strings or numbers).\r\n   * @param vars The variables.\r\n   *\r\n   * @returns True if the first value is less than or equal to the second. Otherwise, false.\r\n   *\r\n   * @example $lte([3, 5]) // true\r\n   * @example $lte([5, 3]) // false\r\n   * @example $lte([3, 3]) // true\r\n   */\n  $lte: function $lte(args, vars) {\n    var values = [expry(args[0], vars), expry(args[1], vars)];\n    assert(values, [isArrayOfType([isNumber]), isArrayOfType([isString])], \"The $lte operator requires two numbers or two strings as arguments.\");\n    return values[0] <= values[1];\n  },\n  /**\r\n   * Compares two values and returns true if they are not equal. Otherwise, it returns false.\r\n   *\r\n   * @param args An array of two values (expressions evaluating to any types).\r\n   * @param vars The variables.\r\n   *\r\n   * @returns True if the two values are not equal. Otherwise, false.\r\n   *\r\n   * @example $ne([3, 3]) // false\r\n   * @example $ne(['hello', 'bye']) // true\r\n   */\n  $ne: function $ne(args, vars) {\n    var a = expry(args[0], vars);\n    var b = expry(args[1], vars);\n    return a !== b;\n  }\n};\n\nvar conditional = {\n  /**\r\n   * Evaluates a boolean expression to return one of the two specified return expressions.\r\n   *\r\n   * @param args The condition, the value if true, and the value if false (expressions evaluating to a boolean, any type, and any type).\r\n   * @param vars The variables.\r\n   *\r\n   * @returns The 'then' value if the condition is true. Otherwise, the 'else' value.\r\n   *\r\n   * @example $cond({ if: true, then: 'yes', else: 'no' }) // 'yes'\r\n   * @example $cond({ if: false, then: 'yes', else: 'no' }) // 'no'\r\n   */\n  $cond: function $cond(args, vars) {\n    var condition = expry(args[\"if\"], vars);\n    assert(condition, [isBoolean], \"The $cond operator requires a boolean as the if argument.\");\n    return condition ? expry(args.then, vars) : expry(args[\"else\"], vars);\n  },\n  /**\r\n   * Evaluates expressions for null values and returns the first non-null expression's value. Otherwise, it returns the last expression's value.\r\n   *\r\n   * @param args The expressions (expressions evaluating to any types).\r\n   * @param vars The variables.\r\n   *\r\n   * @returns The first non-null expression's value. Otherwise, the last expression's value.\r\n   *\r\n   * @example $ifNull([null, 'hello', 'bye']) // 'hello'\r\n   * @example $ifNull([null, null, 'bye']) // 'bye'\r\n   * @example $ifNull([null, null, null]) // null\r\n   */\n  $ifNull: function $ifNull(args, vars) {\n    for (var _iterator = _createForOfIteratorHelperLoose(args), _step; !(_step = _iterator()).done;) {\n      var arg = _step.value;\n      var value = expry(arg, vars);\n      if (value !== null) return value;\n    }\n    return expry(args[args.length - 1], vars);\n  },\n  /**\r\n   * Evaluates a series of case expressions. When it finds an expression which evaluates to true, it returns the value of the corresponding expression. If no expression is true, it returns the value of the default expression.\r\n   *\r\n   * @param args The branches and the default value (expressions evaluating to booleans and any types).\r\n   * @param vars The variables.\r\n   *\r\n   * @returns The value of the first true expression. Otherwise, the default value.\r\n   *\r\n   * @example $switch({ branches: [{ case: false, then: 1 }, { case: true, then: 2 }], default: 3 } }) // 2\r\n   * @example $switch({ branches: [{ case: false, then: 1 }, { case: false, then: 2 }], default: 3 } }) // 3\r\n   */\n  $switch: function $switch(args, vars) {\n    for (var _iterator2 = _createForOfIteratorHelperLoose(args.branches), _step2; !(_step2 = _iterator2()).done;) {\n      var branch = _step2.value;\n      var condition = expry(branch[\"case\"], vars);\n      assert(condition, [isBoolean], \"The $switch operator requires booleans as case arguments.\");\n      if (condition) return expry(branch.then, vars);\n    }\n    return expry(args[\"default\"], vars);\n  }\n};\n\nvar object = {\n  /**\r\n   * Gets the value of a field in an object. If the field does not exist, it returns null.\r\n   *\r\n   * @param args The field and the object (expressions evaluating to a string and an object).\r\n   * @param vars The variables.\r\n   *\r\n   * @returns The value of the field.\r\n   *\r\n   * @example $getField({ field: 'qty', input: { item: 'apple', qty: 25, price: 4.5 } }) // 25\r\n   */\n  $getField: function $getField(args, vars) {\n    var field = expry(args.field, vars);\n    assert(field, [isString], \"The $getField operator requires a string as the field argument.\");\n    var input = expry(args.input, vars);\n    assert(input, [isObject], \"The $getField operator requires an object as the input argument.\");\n    if (field in input) return input[field];\n    return null;\n  },\n  /**\r\n   * Merges objects into a single object.\r\n   *\r\n   * @param args The objects (expressions evaluating to objects).\r\n   * @param vars The variables.\r\n   *\r\n   * @returns The merged object.\r\n   *\r\n   * @example $mergeObjects([{ item: 'apple', qty: 5, price: 2.5 }, { qty: 10, price: 1.2, sale: true }]) // { item: 'apple', qty: 10, price: 1.2, sale: true }\r\n   */\n  $mergeObjects: function $mergeObjects(args, vars) {\n    return args.reduce(function (acc, arg) {\n      var object = expry(arg, vars);\n      assert(object, [isObject], \"The $mergeObjects operator requires objects as arguments.\");\n      return _extends({}, acc, object);\n    }, {});\n  },\n  /**\r\n   * Sets a field in an object to a specified value.\r\n   *\r\n   * @param args The field, the object, and the value (expressions evaluating to a string, an object, and any type).\r\n   * @param vars The variables.\r\n   *\r\n   * @returns The object with the field set to the value.\r\n   *\r\n   * @example $setField({ field: 'item', input: { qty: 25, price: 4.5 }, value: 'apple' }) // { item: 'apple', qty: 25, price: 4.5 }\r\n   */\n  $setField: function $setField(args, vars) {\n    var _extends2;\n    var field = expry(args.field, vars);\n    assert(field, [isString], \"The $setField operator requires a string as the field argument.\");\n    var input = expry(args.input, vars);\n    assert(input, [isObject], \"The $setField operator requires an object as the input argument.\");\n    var value = expry(args.value, vars);\n    return _extends({}, input, (_extends2 = {}, _extends2[field] = value, _extends2));\n  }\n};\n\nvar string = {\n  /**\r\n   * Concatenates strings together.\r\n   *\r\n   * @param args The strings (expressions evaluating to strings).\r\n   * @param vars The variables.\r\n   *\r\n   * @returns The result of concatenating the strings.\r\n   *\r\n   * @example $concat(['hello', ' ', 'world']) // 'hello world'\r\n   */\n  $concat: function $concat(args, vars) {\n    return args.map(function (arg) {\n      var string = expry(arg, vars);\n      assert(string, [isString], \"The $concat operator requires strings as arguments.\");\n      return string;\n    }).join(\"\");\n  },\n  /**\r\n   * Removes whitespace from the beginning of a string.\r\n   *\r\n   * @param args The string (expression evaluating to a string).\r\n   * @param vars The variables.\r\n   *\r\n   * @returns The string with the whitespace removed from the beginning.\r\n   *\r\n   * @example $ltrim('  hello') // 'hello'\r\n   */\n  $ltrim: function $ltrim(args, vars) {\n    var string = expry(args, vars);\n    assert(string, [isString], \"The $ltrim operator requires a string as argument.\");\n    return string.replace(/^\\s+/, \"\");\n  },\n  /**\r\n   * Performs a regular expression and returns true if there is a match. Otherwise, it returns false.\r\n   *\r\n   * @param args A string and a regular expression (expressions evaluating to strings).\r\n   * @param vars The variables.\r\n   *\r\n   * @returns A boolean indicating if there is a match.\r\n   *\r\n   * @example $regexMatch(['hello', '/ell/']) // true\r\n   * @example $regexMatch(['hello', '/bye/']) // false\r\n   */\n  $regexMatch: function $regexMatch(args, vars) {\n    var string = expry(args[0], vars);\n    assert(string, [isString], \"The $regexMatch operator requires a string as the first argument.\");\n    var regex = expry(args[1], vars);\n    assert(regex, [isString], \"The $regexMatch operator requires a string as the second argument.\");\n    return string.match(regex) !== null;\n  },\n  /**\r\n   * Removes whitespace from the end of a string.\r\n   *\r\n   * @param args The string (expression evaluating to a string).\r\n   * @param vars The variables.\r\n   *\r\n   * @returns The string with the whitespace removed from the end.\r\n   *\r\n   * @example $rtrim('hello  ') // 'hello'\r\n   */\n  $rtrim: function $rtrim(args, vars) {\n    var string = expry(args, vars);\n    assert(string, [isString], \"The $rtrim operator requires a string as argument.\");\n    return string.replace(/\\s+$/, \"\");\n  },\n  /**\r\n   * Divides a string into an array of substrings based on a delimiter.\r\n   *\r\n   * @param args A string and a delimiter (expressions evaluating to strings).\r\n   * @param vars The variables.\r\n   *\r\n   * @returns {string[]} The array of substrings.\r\n   *\r\n   * @example $split(['June-15-2013', '-']) // ['June', '15', '2013']\r\n   * @example $split(['hello world', ' ']) // ['hello', 'world']\r\n   */\n  $split: function $split(args, vars) {\n    var string = expry(args[0], vars);\n    assert(string, [isString], \"The $split operator requires a string as the first argument.\");\n    var delimiter = expry(args[1], vars);\n    assert(delimiter, [isString], \"The $split operator requires a string as the second argument.\");\n    return string.split(delimiter);\n  },\n  /**\r\n   * Returns the length of a string.\r\n   *\r\n   * @param args The string (expression evaluating to a string).\r\n   * @param vars The variables.\r\n   *\r\n   * @returns The length of the string.\r\n   *\r\n   * @example $strLen('hello') // 5\r\n   */\n  $strLen: function $strLen(args, vars) {\n    var string = expry(args, vars);\n    assert(string, [isString], \"The $strLen operator requires a string as argument.\");\n    return string.length;\n  },\n  /**\r\n   * Returns a substring of a string.\r\n   *\r\n   * @param args The string, the starting index, and the number of characters (expressions evaluating to a string, a number, and a number).\r\n   * @param vars The variables.\r\n   *\r\n   * @returns The substring of the string.\r\n   *\r\n   * @example $substr(['hello', 0, 2]) // 'he'\r\n   */\n  $substr: function $substr(args, vars) {\n    var string = expry(args[0], vars);\n    assert(string, [isString], \"The $substr operator requires a string as the first argument.\");\n    var start = expry(args[1], vars);\n    assert(start, [isNumber], \"The $substr operator requires a number as the second argument.\");\n    var length = expry(args[2], vars);\n    assert(length, [isNumber], \"The $substr operator requires a number as the third argument.\");\n    return string.substring(start, start + length);\n  },\n  /**\r\n   * Returns the string converted to lowercase.\r\n   *\r\n   * @param args The string (expression evaluating to a string).\r\n   * @param vars The variables.\r\n   *\r\n   * @returns The string converted to lowercase.\r\n   *\r\n   * @example $toLower('Marti Serra') // 'marti serra'\r\n   */\n  $toLower: function $toLower(args, vars) {\n    var string = expry(args, vars);\n    assert(string, [isString], \"The $toLower operator requires a string as argument.\");\n    return string.toLowerCase();\n  },\n  /**\r\n   * Removes whitespace from the beginning and end of a string.\r\n   *\r\n   * @param args The string (expression evaluating to a string).\r\n   * @param vars The variables.\r\n   *\r\n   * @returns The string with the whitespace removed from the beginning and end.\r\n   *\r\n   * @example $trim('  hello  ') // 'hello'\r\n   */\n  $trim: function $trim(args, vars) {\n    var string = expry(args, vars);\n    assert(string, [isString], \"The $trim operator requires a string as argument.\");\n    return string.trim();\n  },\n  /**\r\n   * Returns the string converted to uppercase.\r\n   *\r\n   * @param args The string (expression evaluating to a string).\r\n   * @param vars The variables.\r\n   *\r\n   * @returns The string converted to uppercase.\r\n   *\r\n   * @example $toUpper('Marti Serra') // 'MARTI SERRA'\r\n   */\n  $toUpper: function $toUpper(args, vars) {\n    var string = expry(args, vars);\n    assert(string, [isString], \"The $toUpper operator requires a string as argument.\");\n    return string.toUpperCase();\n  }\n};\n\nvar type = {\n  /**\r\n   * Returns true if the value is a boolean. Otherwise, it returns false.\r\n   *\r\n   * @param args The value (expression evaluating to any type).\r\n   * @param vars The variables.\r\n   *\r\n   * @returns True if the value is a boolean. Otherwise, false.\r\n   *\r\n   * @example $isBoolean(false) // true\r\n   * @example $isBoolean(5) // false\r\n   * @example $isBoolean('hello') // false\r\n   */\n  $isBoolean: function $isBoolean(args, vars) {\n    var value = expry(args, vars);\n    return typeof value === \"boolean\";\n  },\n  /**\r\n   * Returns true if the value is a number. Otherwise, it returns false.\r\n   *\r\n   * @param args The value (expression evaluating to any type).\r\n   * @param vars The variables.\r\n   *\r\n   * @returns True if the value is a number. Otherwise, false.\r\n   *\r\n   * @example $isNumber(5) // true\r\n   * @example $isNumber(true) // false\r\n   * @example $isNumber('hello') // false\r\n   */\n  $isNumber: function $isNumber(args, vars) {\n    var value = expry(args, vars);\n    return typeof value === \"number\";\n  },\n  /**\r\n   * Returns true if the value is a string. Otherwise, it returns false.\r\n   *\r\n   * @param args The value (expression evaluating to any type).\r\n   * @param vars The variables.\r\n   *\r\n   * @returns True if the value is a string. Otherwise, false.\r\n   *\r\n   * @example $isString('hello') // true\r\n   * @example $isString(5) // false\r\n   * @example $isString(true) // false\r\n   */\n  $isString: function $isString(args, vars) {\n    var value = expry(args, vars);\n    return typeof value === \"string\";\n  },\n  /**\r\n   * Converts a value to a boolean.\r\n   *\r\n   * @param args The value (expression evaluating to any type).\r\n   * @param vars The variables.\r\n   *\r\n   * @returns The converted value.\r\n   *\r\n   * @example $toBoolean('hello') // true\r\n   * @example $toBoolean('') // false\r\n   * @example $toBoolean(5) // true\r\n   * @example $toBoolean(0) // false\r\n   */\n  $toBoolean: function $toBoolean(args, vars) {\n    var value = expry(args, vars);\n    return Boolean(value);\n  },\n  /**\r\n   * Converts a value to a number. If the value cannot be converted, it returns null.\r\n   *\r\n   * @param args The value (expression evaluating to any type).\r\n   * @param vars The variables.\r\n   *\r\n   * @returns The converted value.\r\n   *\r\n   * @example $toNumber('5') // 5\r\n   * @example $toNumber('hello') // NaN\r\n   */\n  $toNumber: function $toNumber(args, vars) {\n    var value = expry(args, vars);\n    return Number(value);\n  },\n  /**\r\n   * Converts a value to a string.\r\n   *\r\n   * @param args The value (expression evaluating to any type).\r\n   * @param vars The variables.\r\n   *\r\n   * @returns The converted value.\r\n   *\r\n   * @example $toString(5) // '5'\r\n   * @example $toString(true) // 'true'\r\n   */\n  $toString: function $toString(args, vars) {\n    var value = expry(args, vars);\n    return String(value);\n  }\n};\n\nvar variable = {\n  /**\r\n   * Binds variables for use in the specified expression, and returns the result of the expression.\r\n   *\r\n   * @param args The variables and the expression (expressions evaluating to any types).\r\n   * @param vars The variables.\r\n   *\r\n   * @returns The result of the expression.\r\n   *\r\n   * @example $let({ vars: { age: 24 }, in: { isAdult: { $gte: ['$$age', 18] } } }) // { isAdult: true }\r\n   */\n  $let: function $let(args, vars) {\n    var variables = Object.fromEntries(Object.entries(args.vars).map(function (_ref) {\n      var key = _ref[0],\n        value = _ref[1];\n      return [\"$\" + key, expry(value, vars)];\n    }));\n    return expry(args[\"in\"], _extends({}, vars, variables));\n  }\n};\n\nvar operations = /*#__PURE__*/_extends({}, arithmetic, array, _boolean, comparison, conditional, object, string, type, variable);\n\n/**\r\n * It evaluates the expression with the given variables.\r\n *\r\n * @param expr The expression.\r\n * @param vars The variables to evaluate the expression with.\r\n *\r\n * @returns The result of the expression.\r\n */\nfunction expry(expr, vars) {\n  if (vars === void 0) {\n    vars = {};\n  }\n  if (isArr(expr)) return evalArr(expr, vars);\n  if (isObj(expr)) return evalObj(expr, vars);\n  if (isStr(expr)) return evalStr(expr, vars);\n  return expr;\n}\nfunction isArr(expr) {\n  return Array.isArray(expr);\n}\nfunction evalArr(expr, vars) {\n  return expr.map(function (expression) {\n    return expry(expression, vars);\n  });\n}\nfunction isObj(expr) {\n  return typeof expr === \"object\" && !Array.isArray(expr) && expr !== null;\n}\nfunction evalObj(expr, vars) {\n  if (isOperator(expr)) return evalOperator(expr, vars);\n  return evalObjValue(expr, vars);\n}\nfunction isOperator(expr) {\n  var keys = Object.keys(expr);\n  if (keys.length === 1) return keys[0] in operations;\n  return false;\n}\nfunction evalOperator(expr, vars) {\n  var key = Object.keys(expr)[0];\n  var operator = operations[key];\n  return operator(expr[key], vars);\n}\nfunction evalObjValue(expr, vars) {\n  return Object.fromEntries(Object.entries(expr).map(function (_ref) {\n    var key = _ref[0],\n      expr = _ref[1];\n    return [evalStrValue(key), expry(expr, vars)];\n  }));\n}\nfunction isStr(expr) {\n  return typeof expr === \"string\";\n}\nfunction evalStr(expr, vars) {\n  if (isVariable(expr)) return evalVariable(expr, vars);\n  return evalStrValue(expr);\n}\nfunction isVariable(expr) {\n  return expr.startsWith(\"$\");\n}\nfunction evalVariable(expr, vars) {\n  var parts = expr.slice(1).split(\".\");\n  return parts.reduce(function (acc, key) {\n    if (isObj(acc) && key in acc) return acc[key];\n    if (isArr(acc) && key in acc) return acc[Number(key)];\n    return null;\n  }, vars);\n}\nfunction evalStrValue(expr) {\n  if (expr.startsWith(\"#\")) return expr.slice(1);\n  return expr;\n}\n\n\n//# sourceMappingURL=expry.esm.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvZXhwcnkvZGlzdC9leHByeS5lc20uanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBO0FBQ0E7QUFDQSxnQ0FBZ0MsT0FBTztBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixzQkFBc0I7QUFDMUM7QUFDQSwwQkFBMEI7QUFDMUI7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLEtBQUs7QUFDTDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0Isd0NBQXdDLHFCQUFxQjtBQUNyRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUNBQXlDLHVCQUF1QjtBQUNoRSxLQUFLO0FBQ0wsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0Isd0JBQXdCO0FBQ2hELHdCQUF3Qix1QkFBdUI7QUFDL0Msd0JBQXdCLG9CQUFvQjtBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLHFCQUFxQjtBQUN6QyxvQkFBb0IscUJBQXFCO0FBQ3pDLG9CQUFvQixvQ0FBb0M7QUFDeEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsd0JBQXdCO0FBQy9DLHVCQUF1Qix1QkFBdUI7QUFDOUMsdUJBQXVCLG9CQUFvQjtBQUMzQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCLG1DQUFtQyxzQkFBc0I7QUFDOUUscUJBQXFCLG9DQUFvQyxxQkFBcUI7QUFDOUU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBDQUEwQyx1QkFBdUI7QUFDakUsS0FBSztBQUNMLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLDZCQUE2QjtBQUNuRCxzQkFBc0IsNkJBQTZCO0FBQ25ELHNCQUFzQiw2QkFBNkI7QUFDbkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQiw2QkFBNkI7QUFDbkQsc0JBQXNCLDZCQUE2QjtBQUNuRCxzQkFBc0IsNkJBQTZCO0FBQ25EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0RBQWdELGtDQUFrQztBQUMxRyx3QkFBd0IseUNBQXlDLGlDQUFpQztBQUNsRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQ0FBMEM7QUFDMUM7QUFDQTtBQUNBLE9BQU87QUFDUCxLQUFLO0FBQ0wsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQiw0QkFBNEIsaUNBQWlDO0FBQ3hGLDJCQUEyQiw0QkFBNEIsaUNBQWlDO0FBQ3hGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQ0FBaUM7QUFDakM7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQixtQ0FBbUM7QUFDekQsc0JBQXNCLG9DQUFvQztBQUMxRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUVBQXVFLDRCQUE0QjtBQUNuRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsYUFBYSxzQkFBc0IsSUFBSSxxQkFBcUIsaUJBQWlCO0FBQ3JHLHdCQUF3QixhQUFhLHNCQUFzQixJQUFJLHNCQUFzQixpQkFBaUI7QUFDdEc7QUFDQTtBQUNBLGtGQUFrRiw4QkFBOEI7QUFDaEg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsdUJBQXVCLHNDQUFzQztBQUN2RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQkFBK0IsbUNBQW1DLElBQUksaUNBQWlDLFFBQVE7QUFDL0c7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QjtBQUN4QixLQUFLLElBQUk7QUFDVCxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQix3QkFBd0IscUJBQXFCLGtCQUFrQixPQUFPO0FBQ2hHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0Isd0JBQXdCO0FBQzlDO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsVUFBVTtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQixRQUFRLFNBQVMsUUFBUSxXQUFXLHlCQUF5QixPQUFPO0FBQ3pGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCx3Q0FBd0M7QUFDeEM7QUFDQTs7QUFFQSx5Q0FBeUM7O0FBRXpDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRWlCO0FBQ2pCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZm9ybWl0eS10ZW1wbGF0ZS8uL25vZGVfbW9kdWxlcy9leHByeS9kaXN0L2V4cHJ5LmVzbS5qcz9hMzlhIl0sInNvdXJjZXNDb250ZW50IjpbImZ1bmN0aW9uIF9hcnJheUxpa2VUb0FycmF5KHIsIGEpIHtcbiAgKG51bGwgPT0gYSB8fCBhID4gci5sZW5ndGgpICYmIChhID0gci5sZW5ndGgpO1xuICBmb3IgKHZhciBlID0gMCwgbiA9IEFycmF5KGEpOyBlIDwgYTsgZSsrKSBuW2VdID0gcltlXTtcbiAgcmV0dXJuIG47XG59XG5mdW5jdGlvbiBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlckxvb3NlKHIsIGUpIHtcbiAgdmFyIHQgPSBcInVuZGVmaW5lZFwiICE9IHR5cGVvZiBTeW1ib2wgJiYgcltTeW1ib2wuaXRlcmF0b3JdIHx8IHJbXCJAQGl0ZXJhdG9yXCJdO1xuICBpZiAodCkgcmV0dXJuICh0ID0gdC5jYWxsKHIpKS5uZXh0LmJpbmQodCk7XG4gIGlmIChBcnJheS5pc0FycmF5KHIpIHx8ICh0ID0gX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5KHIpKSB8fCBlICYmIHIgJiYgXCJudW1iZXJcIiA9PSB0eXBlb2Ygci5sZW5ndGgpIHtcbiAgICB0ICYmIChyID0gdCk7XG4gICAgdmFyIG8gPSAwO1xuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gbyA+PSByLmxlbmd0aCA/IHtcbiAgICAgICAgZG9uZTogITBcbiAgICAgIH0gOiB7XG4gICAgICAgIGRvbmU6ICExLFxuICAgICAgICB2YWx1ZTogcltvKytdXG4gICAgICB9O1xuICAgIH07XG4gIH1cbiAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkludmFsaWQgYXR0ZW1wdCB0byBpdGVyYXRlIG5vbi1pdGVyYWJsZSBpbnN0YW5jZS5cXG5JbiBvcmRlciB0byBiZSBpdGVyYWJsZSwgbm9uLWFycmF5IG9iamVjdHMgbXVzdCBoYXZlIGEgW1N5bWJvbC5pdGVyYXRvcl0oKSBtZXRob2QuXCIpO1xufVxuZnVuY3Rpb24gX2V4dGVuZHMoKSB7XG4gIHJldHVybiBfZXh0ZW5kcyA9IE9iamVjdC5hc3NpZ24gPyBPYmplY3QuYXNzaWduLmJpbmQoKSA6IGZ1bmN0aW9uIChuKSB7XG4gICAgZm9yICh2YXIgZSA9IDE7IGUgPCBhcmd1bWVudHMubGVuZ3RoOyBlKyspIHtcbiAgICAgIHZhciB0ID0gYXJndW1lbnRzW2VdO1xuICAgICAgZm9yICh2YXIgciBpbiB0KSAoe30pLmhhc093blByb3BlcnR5LmNhbGwodCwgcikgJiYgKG5bcl0gPSB0W3JdKTtcbiAgICB9XG4gICAgcmV0dXJuIG47XG4gIH0sIF9leHRlbmRzLmFwcGx5KG51bGwsIGFyZ3VtZW50cyk7XG59XG5mdW5jdGlvbiBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkociwgYSkge1xuICBpZiAocikge1xuICAgIGlmIChcInN0cmluZ1wiID09IHR5cGVvZiByKSByZXR1cm4gX2FycmF5TGlrZVRvQXJyYXkociwgYSk7XG4gICAgdmFyIHQgPSB7fS50b1N0cmluZy5jYWxsKHIpLnNsaWNlKDgsIC0xKTtcbiAgICByZXR1cm4gXCJPYmplY3RcIiA9PT0gdCAmJiByLmNvbnN0cnVjdG9yICYmICh0ID0gci5jb25zdHJ1Y3Rvci5uYW1lKSwgXCJNYXBcIiA9PT0gdCB8fCBcIlNldFwiID09PSB0ID8gQXJyYXkuZnJvbShyKSA6IFwiQXJndW1lbnRzXCIgPT09IHQgfHwgL14oPzpVaXxJKW50KD86OHwxNnwzMikoPzpDbGFtcGVkKT9BcnJheSQvLnRlc3QodCkgPyBfYXJyYXlMaWtlVG9BcnJheShyLCBhKSA6IHZvaWQgMDtcbiAgfVxufVxuXG5mdW5jdGlvbiBhc3NlcnQodmFsdWUsIGNoZWNrLCBtZXNzYWdlKSB7XG4gIGlmIChjaGVjay5zb21lKGZ1bmN0aW9uIChjaGVjaykge1xuICAgIHJldHVybiBjaGVjayh2YWx1ZSk7XG4gIH0pKSByZXR1cm47XG4gIHRocm93IG5ldyBFcnJvcihtZXNzYWdlKTtcbn1cbmZ1bmN0aW9uIGlzTnVtYmVyKHZhbHVlKSB7XG4gIHJldHVybiB0eXBlb2YgdmFsdWUgPT09IFwibnVtYmVyXCI7XG59XG5mdW5jdGlvbiBpc1N0cmluZyh2YWx1ZSkge1xuICByZXR1cm4gdHlwZW9mIHZhbHVlID09PSBcInN0cmluZ1wiO1xufVxuZnVuY3Rpb24gaXNCb29sZWFuKHZhbHVlKSB7XG4gIHJldHVybiB0eXBlb2YgdmFsdWUgPT09IFwiYm9vbGVhblwiO1xufVxuZnVuY3Rpb24gaXNBcnJheSh2YWx1ZSkge1xuICByZXR1cm4gQXJyYXkuaXNBcnJheSh2YWx1ZSk7XG59XG5mdW5jdGlvbiBpc09iamVjdCh2YWx1ZSkge1xuICByZXR1cm4gdmFsdWUgIT09IG51bGwgJiYgdHlwZW9mIHZhbHVlID09PSBcIm9iamVjdFwiICYmICFBcnJheS5pc0FycmF5KHZhbHVlKTtcbn1cbmZ1bmN0aW9uIGlzQXJyYXlPZlR5cGUoY2hlY2spIHtcbiAgcmV0dXJuIGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgIHJldHVybiBBcnJheS5pc0FycmF5KHZhbHVlKSAmJiB2YWx1ZS5ldmVyeShmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgcmV0dXJuIGNoZWNrLnNvbWUoZnVuY3Rpb24gKGNoZWNrKSB7XG4gICAgICAgIHJldHVybiBjaGVjayhpdGVtKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9O1xufVxuXG52YXIgYXJpdGhtZXRpYyA9IHtcbiAgLyoqXHJcbiAgICogUmV0dXJucyB0aGUgYWJzb2x1dGUgdmFsdWUgb2YgYSBudW1iZXIuXHJcbiAgICpcclxuICAgKiBAcGFyYW0gYXJncyBUaGUgbnVtYmVyIChleHByZXNzaW9uIGV2YWx1YXRpbmcgdG8gYSBudW1iZXIpLlxyXG4gICAqIEBwYXJhbSB2YXJzIFRoZSB2YXJpYWJsZXMuXHJcbiAgICpcclxuICAgKiBAcmV0dXJucyBUaGUgYWJzb2x1dGUgdmFsdWUgb2YgdGhlIG51bWJlci5cclxuICAgKlxyXG4gICAqIEBleGFtcGxlICRhYnMoLTUpIC8vIDVcclxuICAgKiBAZXhhbXBsZSAkYWJzKDUpIC8vIDVcclxuICAgKi9cbiAgJGFiczogZnVuY3Rpb24gJGFicyhhcmdzLCB2YXJzKSB7XG4gICAgdmFyIG51bWJlciA9IGV4cHJ5KGFyZ3MsIHZhcnMpO1xuICAgIGFzc2VydChudW1iZXIsIFtpc051bWJlcl0sIFwiVGhlICRhYnMgb3BlcmF0b3IgcmVxdWlyZXMgYSBudW1iZXIgYXMgYXJndW1lbnQuXCIpO1xuICAgIHJldHVybiBNYXRoLmFicyhudW1iZXIpO1xuICB9LFxuICAvKipcclxuICAgKiBBZGRzIG51bWJlcnMgdG9nZXRoZXIuXHJcbiAgICpcclxuICAgKiBAcGFyYW0gYXJncyBUaGUgbnVtYmVycyAoZXhwcmVzc2lvbnMgZXZhbHVhdGluZyB0byBudW1iZXJzKS5cclxuICAgKiBAcGFyYW0gdmFycyBUaGUgdmFyaWFibGVzLlxyXG4gICAqXHJcbiAgICogQHJldHVybnMgVGhlIHN1bSBvZiB0aGUgbnVtYmVycy5cclxuICAgKlxyXG4gICAqIEBleGFtcGxlICRhZGQoWzEsIDIsIDNdKSAvLyA2XHJcbiAgICogQGV4YW1wbGUgJGFkZChbMSwgMiwgMywgNF0pIC8vIDEwXHJcbiAgICovXG4gICRhZGQ6IGZ1bmN0aW9uICRhZGQoYXJncywgdmFycykge1xuICAgIHJldHVybiBhcmdzLnJlZHVjZShmdW5jdGlvbiAoYWNjLCBleHByKSB7XG4gICAgICB2YXIgbnVtYmVyID0gZXhwcnkoZXhwciwgdmFycyk7XG4gICAgICBhc3NlcnQobnVtYmVyLCBbaXNOdW1iZXJdLCBcIlRoZSAkYWRkIG9wZXJhdG9yIHJlcXVpcmVzIG51bWJlcnMgYXMgYXJndW1lbnRzLlwiKTtcbiAgICAgIHJldHVybiBhY2MgKyBudW1iZXI7XG4gICAgfSwgMCk7XG4gIH0sXG4gIC8qKlxyXG4gICAqIFJldHVybnMgdGhlIHNtYWxsZXN0IGludGVnZXIgZ3JlYXRlciB0aGFuIG9yIGVxdWFsIHRvIHRoZSBzcGVjaWZpZWQgbnVtYmVyLlxyXG4gICAqXHJcbiAgICogQHBhcmFtIGFyZ3MgVGhlIG51bWJlciAoZXhwcmVzc2lvbiBldmFsdWF0aW5nIHRvIGEgbnVtYmVyKS5cclxuICAgKiBAcGFyYW0gdmFycyBUaGUgdmFyaWFibGVzLlxyXG4gICAqXHJcbiAgICogQHJldHVybnMgVGhlIHNtYWxsZXN0IGludGVnZXIgZ3JlYXRlciB0aGFuIG9yIGVxdWFsIHRvIHRoZSBudW1iZXIuXHJcbiAgICpcclxuICAgKiBAZXhhbXBsZSAkY2VpbCg1LjUpIC8vIDZcclxuICAgKiBAZXhhbXBsZSAkY2VpbCg1LjEpIC8vIDZcclxuICAgKi9cbiAgJGNlaWw6IGZ1bmN0aW9uICRjZWlsKGFyZ3MsIHZhcnMpIHtcbiAgICB2YXIgbnVtYmVyID0gZXhwcnkoYXJncywgdmFycyk7XG4gICAgYXNzZXJ0KG51bWJlciwgW2lzTnVtYmVyXSwgXCJUaGUgJGNlaWwgb3BlcmF0b3IgcmVxdWlyZXMgYSBudW1iZXIgYXMgYXJndW1lbnQuXCIpO1xuICAgIHJldHVybiBNYXRoLmNlaWwobnVtYmVyKTtcbiAgfSxcbiAgLyoqXHJcbiAgICogRGl2aWRlcyBvbmUgbnVtYmVyIGJ5IGFub3RoZXIuXHJcbiAgICpcclxuICAgKiBAcGFyYW0gYXJncyBUaGUgZGl2aWRlbmQgYW5kIGRpdmlzb3IgKGV4cHJlc3Npb25zIGV2YWx1YXRpbmcgdG8gbnVtYmVycykuXHJcbiAgICogQHBhcmFtIHZhcnMgVGhlIHZhcmlhYmxlcy5cclxuICAgKlxyXG4gICAqIEByZXR1cm5zIFRoZSByZXN1bHQgb2YgZGl2aWRpbmcgdGhlIGRpdmlkZW5kIGJ5IHRoZSBkaXZpc29yLlxyXG4gICAqXHJcbiAgICogQGV4YW1wbGUgJGRpdmlkZShbMTAsIDJdKSAvLyA1XHJcbiAgICogQGV4YW1wbGUgJGRpdmlkZShbMTAsIDNdKSAvLyAzLjMzMzMzMzMzMzMzMzMzMzVcclxuICAgKi9cbiAgJGRpdmlkZTogZnVuY3Rpb24gJGRpdmlkZShhcmdzLCB2YXJzKSB7XG4gICAgdmFyIG51bWJlcjEgPSBleHByeShhcmdzWzBdLCB2YXJzKTtcbiAgICBhc3NlcnQobnVtYmVyMSwgW2lzTnVtYmVyXSwgXCJUaGUgJGRpdmlkZSBvcGVyYXRvciByZXF1aXJlcyBudW1iZXJzIGFzIGFyZ3VtZW50cy5cIik7XG4gICAgdmFyIG51bWJlcjIgPSBleHByeShhcmdzWzFdLCB2YXJzKTtcbiAgICBhc3NlcnQobnVtYmVyMiwgW2lzTnVtYmVyXSwgXCJUaGUgJGRpdmlkZSBvcGVyYXRvciByZXF1aXJlcyBudW1iZXJzIGFzIGFyZ3VtZW50cy5cIik7XG4gICAgcmV0dXJuIG51bWJlcjEgLyBudW1iZXIyO1xuICB9LFxuICAvKipcclxuICAgKiBSYWlzZXMgRXVsZXIncyBudW1iZXIgdG8gdGhlIHNwZWNpZmllZCBleHBvbmVudC5cclxuICAgKlxyXG4gICAqIEBwYXJhbSBhcmdzIFRoZSBudW1iZXIgKGV4cHJlc3Npb24gZXZhbHVhdGluZyB0byBhIG51bWJlcikuXHJcbiAgICogQHBhcmFtIHZhcnMgVGhlIHZhcmlhYmxlcy5cclxuICAgKlxyXG4gICAqIEByZXR1cm5zIEV1bGVyJ3MgbnVtYmVyIHJhaXNlZCB0byB0aGUgc3BlY2lmaWVkIHBvd2VyLlxyXG4gICAqXHJcbiAgICogQGV4YW1wbGUgJGV4cCgxKSAvLyAyLjcxODI4MTgyODQ1OTA0NVxyXG4gICAqIEBleGFtcGxlICRleHAoMikgLy8gNy4zODkwNTYwOTg5MzA2NDk1XHJcbiAgICovXG4gICRleHA6IGZ1bmN0aW9uICRleHAoYXJncywgdmFycykge1xuICAgIHZhciBudW1iZXIgPSBleHByeShhcmdzLCB2YXJzKTtcbiAgICBhc3NlcnQobnVtYmVyLCBbaXNOdW1iZXJdLCBcIlRoZSAkZXhwIG9wZXJhdG9yIHJlcXVpcmVzIGEgbnVtYmVyIGFzIGFyZ3VtZW50LlwiKTtcbiAgICByZXR1cm4gTWF0aC5leHAobnVtYmVyKTtcbiAgfSxcbiAgLyoqXHJcbiAgICogUmV0dXJucyB0aGUgbGFyZ2VzdCBpbnRlZ2VyIGxlc3MgdGhhbiBvciBlcXVhbCB0byB0aGUgc3BlY2lmaWVkIG51bWJlci5cclxuICAgKlxyXG4gICAqIEBwYXJhbSBhcmdzIFRoZSBudW1iZXIgKGV4cHJlc3Npb24gZXZhbHVhdGluZyB0byBhIG51bWJlcikuXHJcbiAgICogQHBhcmFtIHZhcnMgVGhlIHZhcmlhYmxlcy5cclxuICAgKlxyXG4gICAqIEByZXR1cm5zIFRoZSBsYXJnZXN0IGludGVnZXIgbGVzcyB0aGFuIG9yIGVxdWFsIHRvIHRoZSBudW1iZXIuXHJcbiAgICpcclxuICAgKiBAZXhhbXBsZSAkZmxvb3IoNS41KSAvLyA1XHJcbiAgICogQGV4YW1wbGUgJGZsb29yKDUuMSkgLy8gNVxyXG4gICAqL1xuICAkZmxvb3I6IGZ1bmN0aW9uICRmbG9vcihhcmdzLCB2YXJzKSB7XG4gICAgdmFyIG51bWJlciA9IGV4cHJ5KGFyZ3MsIHZhcnMpO1xuICAgIGFzc2VydChudW1iZXIsIFtpc051bWJlcl0sIFwiVGhlICRmbG9vciBvcGVyYXRvciByZXF1aXJlcyBhIG51bWJlciBhcyBhcmd1bWVudC5cIik7XG4gICAgcmV0dXJuIE1hdGguZmxvb3IobnVtYmVyKTtcbiAgfSxcbiAgLyoqXHJcbiAgICogUmV0dXJucyB0aGUgbmF0dXJhbCBsb2dhcml0aG0gb2YgYSBudW1iZXIuXHJcbiAgICpcclxuICAgKiBAcGFyYW0gYXJncyBUaGUgbnVtYmVyIChleHByZXNzaW9uIGV2YWx1YXRpbmcgdG8gYSBudW1iZXIpLlxyXG4gICAqIEBwYXJhbSB2YXJzIFRoZSB2YXJpYWJsZXMuXHJcbiAgICpcclxuICAgKiBAcmV0dXJucyBUaGUgbmF0dXJhbCBsb2dhcml0aG0gb2YgdGhlIG51bWJlci5cclxuICAgKlxyXG4gICAqIEBleGFtcGxlICRsbigxKSAvLyAwXHJcbiAgICogQGV4YW1wbGUgJGxuKDIuNzE4MjgxODI4NDU5MDQ1KSAvLyAxXHJcbiAgICovXG4gICRsbjogZnVuY3Rpb24gJGxuKGFyZ3MsIHZhcnMpIHtcbiAgICB2YXIgbnVtYmVyID0gZXhwcnkoYXJncywgdmFycyk7XG4gICAgYXNzZXJ0KG51bWJlciwgW2lzTnVtYmVyXSwgXCJUaGUgJGxuIG9wZXJhdG9yIHJlcXVpcmVzIGEgbnVtYmVyIGFzIGFyZ3VtZW50LlwiKTtcbiAgICByZXR1cm4gTWF0aC5sb2cobnVtYmVyKTtcbiAgfSxcbiAgLyoqXHJcbiAgICogUmV0dXJucyB0aGUgbG9nYXJpdGhtIG9mIGEgbnVtYmVyIGluIGEgc3BlY2lmaWVkIGJhc2UuXHJcbiAgICpcclxuICAgKiBAcGFyYW0gYXJncyBUaGUgbnVtYmVyIGFuZCBiYXNlIChleHByZXNzaW9ucyBldmFsdWF0aW5nIHRvIG51bWJlcnMpLlxyXG4gICAqIEBwYXJhbSB2YXJzIFRoZSB2YXJpYWJsZXMuXHJcbiAgICpcclxuICAgKiBAcmV0dXJucyBUaGUgbG9nYXJpdGhtIG9mIHRoZSBudW1iZXIgaW4gdGhlIHNwZWNpZmllZCBiYXNlLlxyXG4gICAqXHJcbiAgICogQGV4YW1wbGUgJGxvZyhbMTAsIDEwXSkgLy8gMVxyXG4gICAqIEBleGFtcGxlICRsb2coWzEwMCwgMTBdKSAvLyAyXHJcbiAgICovXG4gICRsb2c6IGZ1bmN0aW9uICRsb2coYXJncywgdmFycykge1xuICAgIHZhciBudW1iZXIxID0gZXhwcnkoYXJnc1swXSwgdmFycyk7XG4gICAgYXNzZXJ0KG51bWJlcjEsIFtpc051bWJlcl0sIFwiVGhlICRsb2cgb3BlcmF0b3IgcmVxdWlyZXMgbnVtYmVycyBhcyBhcmd1bWVudHMuXCIpO1xuICAgIHZhciBudW1iZXIyID0gZXhwcnkoYXJnc1sxXSwgdmFycyk7XG4gICAgYXNzZXJ0KG51bWJlcjIsIFtpc051bWJlcl0sIFwiVGhlICRsb2cgb3BlcmF0b3IgcmVxdWlyZXMgbnVtYmVycyBhcyBhcmd1bWVudHMuXCIpO1xuICAgIHJldHVybiBNYXRoLmxvZyhudW1iZXIxKSAvIE1hdGgubG9nKG51bWJlcjIpO1xuICB9LFxuICAvKipcclxuICAgKiBSZXR1cm5zIHRoZSBiYXNlIDEwIGxvZ2FyaXRobSBvZiBhIG51bWJlci5cclxuICAgKlxyXG4gICAqIEBwYXJhbSBhcmdzIFRoZSBudW1iZXIgKGV4cHJlc3Npb24gZXZhbHVhdGluZyB0byBhIG51bWJlcikuXHJcbiAgICogQHBhcmFtIHZhcnMgVGhlIHZhcmlhYmxlcy5cclxuICAgKlxyXG4gICAqIEByZXR1cm5zIFRoZSBiYXNlIDEwIGxvZ2FyaXRobSBvZiB0aGUgbnVtYmVyLlxyXG4gICAqXHJcbiAgICogQGV4YW1wbGUgJGxvZzEwKDEpIC8vIDBcclxuICAgKiBAZXhhbXBsZSAkbG9nMTAoMTApIC8vIDFcclxuICAgKi9cbiAgJGxvZzEwOiBmdW5jdGlvbiAkbG9nMTAoYXJncywgdmFycykge1xuICAgIHZhciBudW1iZXIgPSBleHByeShhcmdzLCB2YXJzKTtcbiAgICBhc3NlcnQobnVtYmVyLCBbaXNOdW1iZXJdLCBcIlRoZSAkbG9nMTAgb3BlcmF0b3IgcmVxdWlyZXMgYSBudW1iZXIgYXMgYXJndW1lbnQuXCIpO1xuICAgIHJldHVybiBNYXRoLmxvZzEwKG51bWJlcik7XG4gIH0sXG4gIC8qKlxyXG4gICAqIFJldHVybnMgdGhlIHJlbWFpbmRlciBvZiBkaXZpZGluZyBvbmUgbnVtYmVyIGJ5IGFub3RoZXIuXHJcbiAgICpcclxuICAgKiBAcGFyYW0gYXJncyBUaGUgZGl2aWRlbmQgYW5kIGRpdmlzb3IgKGV4cHJlc3Npb25zIGV2YWx1YXRpbmcgdG8gbnVtYmVycykuXHJcbiAgICogQHBhcmFtIHZhcnMgVGhlIHZhcmlhYmxlcy5cclxuICAgKlxyXG4gICAqIEByZXR1cm5zIFRoZSByZW1haW5kZXIgb2YgZGl2aWRpbmcgdGhlIGRpdmlkZW5kIGJ5IHRoZSBkaXZpc29yLlxyXG4gICAqXHJcbiAgICogQGV4YW1wbGUgJG1vZChbMTAsIDNdKSAvLyAxXHJcbiAgICogQGV4YW1wbGUgJG1vZChbMTAsIDJdKSAvLyAwXHJcbiAgICovXG4gICRtb2Q6IGZ1bmN0aW9uICRtb2QoYXJncywgdmFycykge1xuICAgIHZhciBudW1iZXIxID0gZXhwcnkoYXJnc1swXSwgdmFycyk7XG4gICAgYXNzZXJ0KG51bWJlcjEsIFtpc051bWJlcl0sIFwiVGhlICRtb2Qgb3BlcmF0b3IgcmVxdWlyZXMgbnVtYmVycyBhcyBhcmd1bWVudHMuXCIpO1xuICAgIHZhciBudW1iZXIyID0gZXhwcnkoYXJnc1sxXSwgdmFycyk7XG4gICAgYXNzZXJ0KG51bWJlcjIsIFtpc051bWJlcl0sIFwiVGhlICRtb2Qgb3BlcmF0b3IgcmVxdWlyZXMgbnVtYmVycyBhcyBhcmd1bWVudHMuXCIpO1xuICAgIHJldHVybiBudW1iZXIxICUgbnVtYmVyMjtcbiAgfSxcbiAgLyoqXHJcbiAgICogTXVsdGlwbGllcyBudW1iZXJzIHRvZ2V0aGVyLlxyXG4gICAqXHJcbiAgICogQHBhcmFtIGFyZ3MgVGhlIG51bWJlcnMgKGV4cHJlc3Npb25zIGV2YWx1YXRpbmcgdG8gbnVtYmVycykuXHJcbiAgICogQHBhcmFtIHZhcnMgVGhlIHZhcmlhYmxlcy5cclxuICAgKlxyXG4gICAqIEByZXR1cm5zIFRoZSBwcm9kdWN0IG9mIHRoZSBudW1iZXJzLlxyXG4gICAqXHJcbiAgICogQGV4YW1wbGUgJG11bHRpcGx5KFsxLCAyLCAzXSkgLy8gNlxyXG4gICAqL1xuICAkbXVsdGlwbHk6IGZ1bmN0aW9uICRtdWx0aXBseShhcmdzLCB2YXJzKSB7XG4gICAgcmV0dXJuIGFyZ3MucmVkdWNlKGZ1bmN0aW9uIChhY2MsIGV4cHIpIHtcbiAgICAgIHZhciBudW1iZXIgPSBleHByeShleHByLCB2YXJzKTtcbiAgICAgIGFzc2VydChudW1iZXIsIFtpc051bWJlcl0sIFwiVGhlICRtdWx0aXBseSBvcGVyYXRvciByZXF1aXJlcyBudW1iZXJzIGFzIGFyZ3VtZW50cy5cIik7XG4gICAgICByZXR1cm4gYWNjICogbnVtYmVyO1xuICAgIH0sIDEpO1xuICB9LFxuICAvKipcclxuICAgKiBSYWlzZXMgYSBudW1iZXIgdG8gdGhlIHNwZWNpZmllZCBleHBvbmVudC5cclxuICAgKlxyXG4gICAqIEBwYXJhbSBhcmdzIFRoZSBiYXNlIGFuZCBleHBvbmVudCAoZXhwcmVzc2lvbnMgZXZhbHVhdGluZyB0byBudW1iZXJzKS5cclxuICAgKiBAcGFyYW0gdmFycyBUaGUgdmFyaWFibGVzLlxyXG4gICAqXHJcbiAgICogQHJldHVybnMgVGhlIGJhc2UgcmFpc2VkIHRvIHRoZSBzcGVjaWZpZWQgcG93ZXIuXHJcbiAgICpcclxuICAgKiBAZXhhbXBsZSAkcG93KFsyLCAzXSkgLy8gOFxyXG4gICAqIEBleGFtcGxlICRwb3coWzMsIDJdKSAvLyA5XHJcbiAgICovXG4gICRwb3c6IGZ1bmN0aW9uICRwb3coYXJncywgdmFycykge1xuICAgIHZhciBudW1iZXIxID0gZXhwcnkoYXJnc1swXSwgdmFycyk7XG4gICAgYXNzZXJ0KG51bWJlcjEsIFtpc051bWJlcl0sIFwiVGhlICRwb3cgb3BlcmF0b3IgcmVxdWlyZXMgbnVtYmVycyBhcyBhcmd1bWVudHMuXCIpO1xuICAgIHZhciBudW1iZXIyID0gZXhwcnkoYXJnc1sxXSwgdmFycyk7XG4gICAgYXNzZXJ0KG51bWJlcjIsIFtpc051bWJlcl0sIFwiVGhlICRwb3cgb3BlcmF0b3IgcmVxdWlyZXMgbnVtYmVycyBhcyBhcmd1bWVudHMuXCIpO1xuICAgIHJldHVybiBNYXRoLnBvdyhudW1iZXIxLCBudW1iZXIyKTtcbiAgfSxcbiAgLyoqXHJcbiAgICogUm91bmRzIGEgbnVtYmVyIHRvIHRoZSBuZWFyZXN0IGludGVnZXIuXHJcbiAgICpcclxuICAgKiBAcGFyYW0gYXJncyBUaGUgbnVtYmVyIGFuZCB0aGUgbnVtYmVyIG9mIGRlY2ltYWwgcGxhY2VzIChleHByZXNzaW9ucyBldmFsdWF0aW5nIHRvIG51bWJlcnMpLlxyXG4gICAqIEBwYXJhbSB2YXJzIFRoZSB2YXJpYWJsZXMuXHJcbiAgICpcclxuICAgKiBAcmV0dXJucyBUaGUgbnVtYmVyIHJvdW5kZWQgdG8gdGhlIG5lYXJlc3QgbnVtYmVyIHdpdGggdGhlIHNwZWNpZmllZCBudW1iZXIgb2YgZGVjaW1hbCBwbGFjZXMuXHJcbiAgICpcclxuICAgKiBAZXhhbXBsZSAkcm91bmQoWzUuNSwgMF0pIC8vIDZcclxuICAgKiBAZXhhbXBsZSAkcm91bmQoWzUuNSwgMV0pIC8vIDUuNVxyXG4gICAqL1xuICAkcm91bmQ6IGZ1bmN0aW9uICRyb3VuZChhcmdzLCB2YXJzKSB7XG4gICAgdmFyIG51bWJlciA9IGV4cHJ5KGFyZ3NbMF0sIHZhcnMpO1xuICAgIGFzc2VydChudW1iZXIsIFtpc051bWJlcl0sIFwiVGhlICRyb3VuZCBvcGVyYXRvciByZXF1aXJlcyBudW1iZXJzIGFzIGFyZ3VtZW50cy5cIik7XG4gICAgdmFyIHBsYWNlcyA9IGV4cHJ5KGFyZ3NbMV0sIHZhcnMpO1xuICAgIGFzc2VydChwbGFjZXMsIFtpc051bWJlcl0sIFwiVGhlICRyb3VuZCBvcGVyYXRvciByZXF1aXJlcyBudW1iZXJzIGFzIGFyZ3VtZW50cy5cIik7XG4gICAgdmFyIGZhY3RvciA9IE1hdGgucG93KDEwLCBwbGFjZXMpO1xuICAgIHJldHVybiBNYXRoLnJvdW5kKG51bWJlciAqIGZhY3RvcikgLyBmYWN0b3I7XG4gIH0sXG4gIC8qKlxyXG4gICAqIFJldHVybnMgdGhlIHNxdWFyZSByb290IG9mIGEgbnVtYmVyLlxyXG4gICAqXHJcbiAgICogQHBhcmFtIGFyZ3MgVGhlIG51bWJlciAoZXhwcmVzc2lvbiBldmFsdWF0aW5nIHRvIGEgbnVtYmVyKS5cclxuICAgKiBAcGFyYW0gdmFycyBUaGUgdmFyaWFibGVzLlxyXG4gICAqXHJcbiAgICogQHJldHVybnMgVGhlIHNxdWFyZSByb290IG9mIHRoZSBudW1iZXIuXHJcbiAgICpcclxuICAgKiBAZXhhbXBsZSAkc3FydCg0KSAvLyAyXHJcbiAgICogQGV4YW1wbGUgJHNxcnQoOSkgLy8gM1xyXG4gICAqL1xuICAkc3FydDogZnVuY3Rpb24gJHNxcnQoYXJncywgdmFycykge1xuICAgIHZhciBudW1iZXIgPSBleHByeShhcmdzLCB2YXJzKTtcbiAgICBhc3NlcnQobnVtYmVyLCBbaXNOdW1iZXJdLCBcIlRoZSAkc3FydCBvcGVyYXRvciByZXF1aXJlcyBhIG51bWJlciBhcyBhcmd1bWVudC5cIik7XG4gICAgcmV0dXJuIE1hdGguc3FydChudW1iZXIpO1xuICB9LFxuICAvKipcclxuICAgKiBTdWJ0cmFjdHMgb25lIG51bWJlciBmcm9tIGFub3RoZXIuXHJcbiAgICpcclxuICAgKiBAcGFyYW0gYXJncyBUaGUgbWludWVuZCBhbmQgc3VidHJhaGVuZCAoZXhwcmVzc2lvbnMgZXZhbHVhdGluZyB0byBudW1iZXJzKS5cclxuICAgKiBAcGFyYW0gdmFycyBUaGUgdmFyaWFibGVzLlxyXG4gICAqXHJcbiAgICogQHJldHVybnMgVGhlIHJlc3VsdCBvZiBzdWJ0cmFjdGluZyB0aGUgc3VidHJhaGVuZCBmcm9tIHRoZSBtaW51ZW5kLlxyXG4gICAqXHJcbiAgICogQGV4YW1wbGUgJHN1YnRyYWN0KFs1LCAzXSkgLy8gMlxyXG4gICAqIEBleGFtcGxlICRzdWJ0cmFjdChbMywgNV0pIC8vIC0yXHJcbiAgICovXG4gICRzdWJ0cmFjdDogZnVuY3Rpb24gJHN1YnRyYWN0KGFyZ3MsIHZhcnMpIHtcbiAgICB2YXIgbnVtYmVyMSA9IGV4cHJ5KGFyZ3NbMF0sIHZhcnMpO1xuICAgIGFzc2VydChudW1iZXIxLCBbaXNOdW1iZXJdLCBcIlRoZSAkc3VidHJhY3Qgb3BlcmF0b3IgcmVxdWlyZXMgbnVtYmVycyBhcyBhcmd1bWVudHMuXCIpO1xuICAgIHZhciBudW1iZXIyID0gZXhwcnkoYXJnc1sxXSwgdmFycyk7XG4gICAgYXNzZXJ0KG51bWJlcjIsIFtpc051bWJlcl0sIFwiVGhlICRzdWJ0cmFjdCBvcGVyYXRvciByZXF1aXJlcyBudW1iZXJzIGFzIGFyZ3VtZW50cy5cIik7XG4gICAgcmV0dXJuIG51bWJlcjEgLSBudW1iZXIyO1xuICB9LFxuICAvKipcclxuICAgKiBUcnVuY2F0ZXMgYSBudW1iZXIgdG8gdGhlIHNwZWNpZmllZCBudW1iZXIgb2YgZGVjaW1hbCBwbGFjZXMuXHJcbiAgICpcclxuICAgKiBAcGFyYW0gYXJncyBUaGUgbnVtYmVyIGFuZCB0aGUgbnVtYmVyIG9mIGRlY2ltYWwgcGxhY2VzIChleHByZXNzaW9ucyBldmFsdWF0aW5nIHRvIG51bWJlcnMpLlxyXG4gICAqIEBwYXJhbSB2YXJzIFRoZSB2YXJpYWJsZXMuXHJcbiAgICpcclxuICAgKiBAcmV0dXJucyBUaGUgbnVtYmVyIHRydW5jYXRlZCB0byB0aGUgc3BlY2lmaWVkIG51bWJlciBvZiBkZWNpbWFsIHBsYWNlcy5cclxuICAgKlxyXG4gICAqIEBleGFtcGxlICR0cnVuYyg1LjUpIC8vIDVcclxuICAgKiBAZXhhbXBsZSAkdHJ1bmMoNS41LCAxKSAvLyA1LjVcclxuICAgKi9cbiAgJHRydW5jOiBmdW5jdGlvbiAkdHJ1bmMoYXJncywgdmFycykge1xuICAgIHZhciBudW1iZXIgPSBleHByeShhcmdzWzBdLCB2YXJzKTtcbiAgICBhc3NlcnQobnVtYmVyLCBbaXNOdW1iZXJdLCBcIlRoZSAkdHJ1bmMgb3BlcmF0b3IgcmVxdWlyZXMgbnVtYmVycyBhcyBhcmd1bWVudHMuXCIpO1xuICAgIHZhciBwbGFjZXMgPSBleHByeShhcmdzWzFdLCB2YXJzKTtcbiAgICBhc3NlcnQocGxhY2VzLCBbaXNOdW1iZXJdLCBcIlRoZSAkdHJ1bmMgb3BlcmF0b3IgcmVxdWlyZXMgbnVtYmVycyBhcyBhcmd1bWVudHMuXCIpO1xuICAgIHZhciBmYWN0b3IgPSBNYXRoLnBvdygxMCwgcGxhY2VzKTtcbiAgICByZXR1cm4gTWF0aC50cnVuYyhudW1iZXIgKiBmYWN0b3IpIC8gZmFjdG9yO1xuICB9XG59O1xuXG52YXIgYXJyYXkgPSB7XG4gIC8qKlxyXG4gICAqIFJldHVybnMgdGhlIGVsZW1lbnQgYXQgdGhlIHNwZWNpZmllZCBpbmRleCBpbiBhbiBhcnJheS5cclxuICAgKlxyXG4gICAqIEBwYXJhbSBhcmdzIFRoZSBhcnJheSBhbmQgdGhlIGluZGV4IChleHByZXNzaW9ucyBldmFsdWF0aW5nIHRvIGFuIGFycmF5IGFuZCBhIG51bWJlcikuXHJcbiAgICogQHBhcmFtIHZhcnMgVGhlIHZhcmlhYmxlcy5cclxuICAgKlxyXG4gICAqIEByZXR1cm5zIFRoZSBlbGVtZW50IGF0IHRoZSBzcGVjaWZpZWQgaW5kZXggaW4gdGhlIGFycmF5LlxyXG4gICAqXHJcbiAgICogQGV4YW1wbGUgJGFycmF5RWxlbUF0KFsxLCAyLCAzXSwgMCkgLy8gMVxyXG4gICAqIEBleGFtcGxlICRhcnJheUVsZW1BdChbMSwgMiwgM10sIDEpIC8vIDJcclxuICAgKiBAZXhhbXBsZSAkYXJyYXlFbGVtQXQoWzEsIDIsIDNdLCAzKSAvLyBudWxsXHJcbiAgICovXG4gICRhcnJheUVsZW1BdDogZnVuY3Rpb24gJGFycmF5RWxlbUF0KGFyZ3MsIHZhcnMpIHtcbiAgICB2YXIgYXJyYXkgPSBleHByeShhcmdzWzBdLCB2YXJzKTtcbiAgICBhc3NlcnQoYXJyYXksIFtpc0FycmF5XSwgXCJUaGUgJGFycmF5RWxlbUF0IG9wZXJhdG9yIHJlcXVpcmVzIGFuIGFycmF5IGFzIHRoZSBmaXJzdCBhcmd1bWVudC5cIik7XG4gICAgdmFyIGluZGV4ID0gZXhwcnkoYXJnc1sxXSwgdmFycyk7XG4gICAgYXNzZXJ0KGluZGV4LCBbaXNOdW1iZXJdLCBcIlRoZSAkYXJyYXlFbGVtQXQgb3BlcmF0b3IgcmVxdWlyZXMgYSBudW1iZXIgYXMgdGhlIHNlY29uZCBhcmd1bWVudC5cIik7XG4gICAgaWYgKGluZGV4IDwgMCB8fCBpbmRleCA+PSBhcnJheS5sZW5ndGgpIHJldHVybiBudWxsO1xuICAgIHJldHVybiBhcnJheVtpbmRleF07XG4gIH0sXG4gIC8qKlxyXG4gICAqIFJldHVybnMgdGhlIGNvbmNhdGVuYXRpb24gb2YgYXJyYXlzLlxyXG4gICAqXHJcbiAgICogQHBhcmFtIGFyZ3MgVGhlIGFycmF5cyAoZXhwcmVzc2lvbnMgZXZhbHVhdGluZyB0byBhcnJheXMpLlxyXG4gICAqIEBwYXJhbSB2YXJzIFRoZSB2YXJpYWJsZXMuXHJcbiAgICpcclxuICAgKiBAcmV0dXJucyBUaGUgY29uY2F0ZW5hdGlvbiBvZiB0aGUgYXJyYXlzLlxyXG4gICAqXHJcbiAgICogQGV4YW1wbGUgJGNvbmNhdEFycmF5cyhbWzEsIDJdLCBbMywgNF1dKSAvLyBbMSwgMiwgMywgNF1cclxuICAgKiBAZXhhbXBsZSAkY29uY2F0QXJyYXlzKFtbJ2hlbGxvJywgJyAnXSwgWyd3b3JsZCddXSkgLy8gWydoZWxsbycsICcgJywgJ3dvcmxkJ11cclxuICAgKiBAZXhhbXBsZSAkY29uY2F0QXJyYXlzKFtbJ2hlbGxvJywgJyAnXSwgW1snd29ybGQnXV1dKSAvLyBbJ2hlbGxvJywgJyAnLCBbJ3dvcmxkJ11dXHJcbiAgICovXG4gICRjb25jYXRBcnJheXM6IGZ1bmN0aW9uICRjb25jYXRBcnJheXMoYXJncywgdmFycykge1xuICAgIHJldHVybiBhcmdzLnJlZHVjZShmdW5jdGlvbiAoYWNjLCBleHByKSB7XG4gICAgICB2YXIgYXJyYXkgPSBleHByeShleHByLCB2YXJzKTtcbiAgICAgIGFzc2VydChhcnJheSwgW2lzQXJyYXldLCBcIlRoZSAkY29uY2F0QXJyYXlzIG9wZXJhdG9yIHJlcXVpcmVzIGFycmF5cyBhcyBhcmd1bWVudHMuXCIpO1xuICAgICAgcmV0dXJuIGFjYy5jb25jYXQoYXJyYXkpO1xuICAgIH0sIFtdKTtcbiAgfSxcbiAgLyoqXHJcbiAgICogUmV0dXJucyBhIHN1YnNldCBvZiBhbiBhcnJheSBiYXNlZCBvbiB0aGUgc3BlY2lmaWVkIGNvbmRpdGlvbi5cclxuICAgKlxyXG4gICAqIEBwYXJhbSBhcmdzIFRoZSBhcnJheSwgdGhlIGNvbmRpdGlvbiwgYW5kIHRoZSB2YXJpYWJsZSBuYW1lIChleHByZXNzaW9ucyBldmFsdWF0aW5nIHRvIGFuIGFycmF5LCBhIGJvb2xlYW4sIGFuZCBhIHN0cmluZykuXHJcbiAgICogQHBhcmFtIHZhcnMgVGhlIHZhcmlhYmxlcy5cclxuICAgKlxyXG4gICAqIEByZXR1cm5zIFRoZSBzdWJzZXQgb2YgdGhlIGFycmF5LlxyXG4gICAqXHJcbiAgICogQGV4YW1wbGUgJGZpbHRlcih7IGlucHV0OiBbMSwgMiwgMywgNF0sIGFzOiAnbnVtJywgY29uZDogeyAkZ3Q6IFsnJCRudW0nLCAyXSB9IH0pIC8vIFszLCA0XVxyXG4gICAqL1xuICAkZmlsdGVyOiBmdW5jdGlvbiAkZmlsdGVyKGFyZ3MsIHZhcnMpIHtcbiAgICB2YXIgYXJyYXkgPSBleHByeShhcmdzLmlucHV0LCB2YXJzKTtcbiAgICBhc3NlcnQoYXJyYXksIFtpc0FycmF5XSwgXCJUaGUgJGZpbHRlciBvcGVyYXRvciByZXF1aXJlcyBhbiBhcnJheSBhcyB0aGUgaW5wdXQgYXJndW1lbnQuXCIpO1xuICAgIHZhciBhcyA9IGV4cHJ5KGFyZ3MuYXMsIHZhcnMpO1xuICAgIGFzc2VydChhcywgW2lzU3RyaW5nXSwgXCJUaGUgJGZpbHRlciBvcGVyYXRvciByZXF1aXJlcyBhIHN0cmluZyBhcyB0aGUgYXMgYXJndW1lbnQuXCIpO1xuICAgIHJldHVybiBhcnJheS5maWx0ZXIoZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICB2YXIgX2V4dGVuZHMyO1xuICAgICAgcmV0dXJuIGV4cHJ5KGFyZ3MuY29uZCwgX2V4dGVuZHMoe30sIHZhcnMsIChfZXh0ZW5kczIgPSB7fSwgX2V4dGVuZHMyW1wiJFwiICsgYXNdID0gdmFsdWUsIF9leHRlbmRzMikpKTtcbiAgICB9KTtcbiAgfSxcbiAgLyoqXHJcbiAgICogUmV0dXJucyBhIHNwZWNpZmllZCBudW1iZXIgb2YgZWxlbWVudHMgZnJvbSB0aGUgYmVnaW5uaW5nIG9mIGFuIGFycmF5LlxyXG4gICAqXHJcbiAgICogQHBhcmFtIGFyZ3MgVGhlIGFycmF5IGFuZCB0aGUgbnVtYmVyIG9mIGVsZW1lbnRzIChleHByZXNzaW9ucyBldmFsdWF0aW5nIHRvIGFuIGFycmF5IGFuZCBhIG51bWJlcikuXHJcbiAgICogQHBhcmFtIHZhcnMgVGhlIHZhcmlhYmxlcy5cclxuICAgKlxyXG4gICAqIEByZXR1cm5zIFRoZSBzcGVjaWZpZWQgbnVtYmVyIG9mIGVsZW1lbnRzIGZyb20gdGhlIGJlZ2lubmluZyBvZiB0aGUgYXJyYXkuXHJcbiAgICpcclxuICAgKiBAZXhhbXBsZSAkZmlyc3ROKHsgbjogMiwgaW5wdXQ6IFsxLCAyLCAzXSB9KSAvLyBbMSwgMl1cclxuICAgKiBAZXhhbXBsZSAkZmlyc3ROKHsgbjogMywgaW5wdXQ6IFsxLCAyXSB9IH0pIC8vIFsxLCAyXVxyXG4gICAqIEBleGFtcGxlICRmaXJzdE4oeyBuOiAyLCBpbnB1dDogWzFdIH0gfSkgLy8gWzFdXHJcbiAgICovXG4gICRmaXJzdE46IGZ1bmN0aW9uICRmaXJzdE4oYXJncywgdmFycykge1xuICAgIHZhciBhcnJheSA9IGV4cHJ5KGFyZ3MuaW5wdXQsIHZhcnMpO1xuICAgIGFzc2VydChhcnJheSwgW2lzQXJyYXldLCBcIlRoZSAkZmlyc3ROIG9wZXJhdG9yIHJlcXVpcmVzIGFuIGFycmF5IGFzIHRoZSBpbnB1dCBhcmd1bWVudC5cIik7XG4gICAgdmFyIG4gPSBleHByeShhcmdzLm4sIHZhcnMpO1xuICAgIGFzc2VydChuLCBbaXNOdW1iZXJdLCBcIlRoZSAkZmlyc3ROIG9wZXJhdG9yIHJlcXVpcmVzIGEgbnVtYmVyIGFzIHRoZSBuIGFyZ3VtZW50LlwiKTtcbiAgICByZXR1cm4gYXJyYXkuc2xpY2UoMCwgbik7XG4gIH0sXG4gIC8qKlxyXG4gICAqIFJldHVybnMgYSBib29sZWFuIGluZGljYXRpbmcgd2hldGhlciBhIHZhbHVlIGlzIGluIGFuIGFycmF5LlxyXG4gICAqXHJcbiAgICogQHBhcmFtIGFyZ3MgVGhlIHZhbHVlIGFuZCB0aGUgYXJyYXkgKGV4cHJlc3Npb25zIGV2YWx1YXRpbmcgdG8gYW55IHR5cGUgYW5kIGFuIGFycmF5KS5cclxuICAgKiBAcGFyYW0gdmFycyBUaGUgdmFyaWFibGVzLlxyXG4gICAqXHJcbiAgICogQHJldHVybnMgQSBib29sZWFuIGluZGljYXRpbmcgd2hldGhlciB0aGUgdmFsdWUgaXMgaW4gdGhlIGFycmF5LlxyXG4gICAqXHJcbiAgICogQGV4YW1wbGUgJGluKHsgJGluOiBbMiwgWzEsIDIsIDNdXSB9KSAvLyB0cnVlXHJcbiAgICogQGV4YW1wbGUgJGluKHsgJGluOiBbNCwgWzEsIDIsIDNdXSB9KSAvLyBmYWxzZVxyXG4gICAqIEBleGFtcGxlICRpbih7ICRpbjogWyd3b3JsZCcsIFsnaGVsbG8nLCAnd29ybGQnXV0gfSkgLy8gdHJ1ZVxyXG4gICAqL1xuICAkaW46IGZ1bmN0aW9uICRpbihhcmdzLCB2YXJzKSB7XG4gICAgdmFyIHZhbHVlID0gZXhwcnkoYXJnc1swXSwgdmFycyk7XG4gICAgdmFyIGFycmF5ID0gZXhwcnkoYXJnc1sxXSwgdmFycyk7XG4gICAgYXNzZXJ0KGFycmF5LCBbaXNBcnJheV0sIFwiVGhlICRpbiBvcGVyYXRvciByZXF1aXJlcyBhbiBhcnJheSBhcyB0aGUgc2Vjb25kIGFyZ3VtZW50LlwiKTtcbiAgICByZXR1cm4gYXJyYXkuaW5jbHVkZXModmFsdWUpO1xuICB9LFxuICAvKipcclxuICAgKiBSZXR1cm5zIHRoZSBpbmRleCBvZiB0aGUgZmlyc3Qgb2NjdXJyZW5jZSBvZiBhIHZhbHVlIGluIGFuIGFycmF5LiBJZiB0aGUgdmFsdWUgaXMgbm90IGluIHRoZSBhcnJheSwgaXQgcmV0dXJucyAtMS5cclxuICAgKlxyXG4gICAqIEBwYXJhbSBhcmdzIFRoZSB2YWx1ZSBhbmQgdGhlIGFycmF5IChleHByZXNzaW9ucyBldmFsdWF0aW5nIHRvIGFueSB0eXBlIGFuZCBhbiBhcnJheSkuXHJcbiAgICogQHBhcmFtIHZhcnMgVGhlIHZhcmlhYmxlcy5cclxuICAgKlxyXG4gICAqIEByZXR1cm5zIFRoZSBpbmRleCBvZiB0aGUgZmlyc3Qgb2NjdXJyZW5jZSBvZiB0aGUgdmFsdWUgaW4gdGhlIGFycmF5LlxyXG4gICAqXHJcbiAgICogQGV4YW1wbGUgJGluZGV4T2ZBcnJheShbWydhJywgJ2FiYyddLCAnYSddKSAvLyAwXHJcbiAgICogQGV4YW1wbGUgJGluZGV4T2ZBcnJheShbWzEsIDJdLCA1XSkgLy8gLTFcclxuICAgKi9cbiAgJGluZGV4T2ZBcnJheTogZnVuY3Rpb24gJGluZGV4T2ZBcnJheShhcmdzLCB2YXJzKSB7XG4gICAgdmFyIGFycmF5ID0gZXhwcnkoYXJnc1swXSwgdmFycyk7XG4gICAgYXNzZXJ0KGFycmF5LCBbaXNBcnJheV0sIFwiVGhlICRpbmRleE9mQXJyYXkgb3BlcmF0b3IgcmVxdWlyZXMgYW4gYXJyYXkgYXMgdGhlIGZpcnN0IGFyZ3VtZW50LlwiKTtcbiAgICB2YXIgdmFsdWUgPSBleHByeShhcmdzWzFdLCB2YXJzKTtcbiAgICByZXR1cm4gYXJyYXkuaW5kZXhPZih2YWx1ZSk7XG4gIH0sXG4gIC8qKlxyXG4gICAqIFJldHVybnMgYSBzcGVjaWZpZWQgbnVtYmVyIG9mIGVsZW1lbnRzIGZyb20gdGhlIGVuZCBvZiBhbiBhcnJheS5cclxuICAgKlxyXG4gICAqIEBwYXJhbSBhcmdzIFRoZSBhcnJheSBhbmQgdGhlIG51bWJlciBvZiBlbGVtZW50cyAoZXhwcmVzc2lvbnMgZXZhbHVhdGluZyB0byBhbiBhcnJheSBhbmQgYSBudW1iZXIpLlxyXG4gICAqIEBwYXJhbSB2YXJzIFRoZSB2YXJpYWJsZXMuXHJcbiAgICpcclxuICAgKiBAcmV0dXJucyBUaGUgc3BlY2lmaWVkIG51bWJlciBvZiBlbGVtZW50cyBmcm9tIHRoZSBlbmQgb2YgdGhlIGFycmF5LlxyXG4gICAqXHJcbiAgICogQGV4YW1wbGUgJGxhc3ROKHsgbjogMiwgaW5wdXQ6IFsxLCAyLCAzXSB9KSAvLyBbMiwgM11cclxuICAgKiBAZXhhbXBsZSAkbGFzdE4oeyBuOiAzLCBpbnB1dDogWzEsIDJdIH0gfSkgLy8gWzEsIDJdXHJcbiAgICogQGV4YW1wbGUgJGxhc3ROKHsgbjogMiwgaW5wdXQ6IFsxXSB9IH0pIC8vIFsxXVxyXG4gICAqL1xuICAkbGFzdE46IGZ1bmN0aW9uICRsYXN0TihhcmdzLCB2YXJzKSB7XG4gICAgdmFyIGFycmF5ID0gZXhwcnkoYXJncy5pbnB1dCwgdmFycyk7XG4gICAgYXNzZXJ0KGFycmF5LCBbaXNBcnJheV0sIFwiVGhlICRsYXN0TiBvcGVyYXRvciByZXF1aXJlcyBhbiBhcnJheSBhcyB0aGUgaW5wdXQgYXJndW1lbnQuXCIpO1xuICAgIHZhciBuID0gZXhwcnkoYXJncy5uLCB2YXJzKTtcbiAgICBhc3NlcnQobiwgW2lzTnVtYmVyXSwgXCJUaGUgJGxhc3ROIG9wZXJhdG9yIHJlcXVpcmVzIGEgbnVtYmVyIGFzIHRoZSBuIGFyZ3VtZW50LlwiKTtcbiAgICByZXR1cm4gYXJyYXkuc2xpY2UoLW4pO1xuICB9LFxuICAvKipcclxuICAgKiBBcHBsaWVzIGEgc3BlY2lmaWVkIGV4cHJlc3Npb24gdG8gZWFjaCBlbGVtZW50IG9mIGFuIGFycmF5IGFuZCByZXR1cm5zIHRoZSByZXN1bHQuXHJcbiAgICpcclxuICAgKiBAcGFyYW0gYXJncyBUaGUgYXJyYXksIHRoZSB2YXJpYWJsZSBuYW1lLCBhbmQgdGhlIGV4cHJlc3Npb24gKGV4cHJlc3Npb25zIGV2YWx1YXRpbmcgdG8gYW4gYXJyYXksIGEgc3RyaW5nLCBhbmQgYW55IHR5cGUpLlxyXG4gICAqIEBwYXJhbSB2YXJzIFRoZSB2YXJpYWJsZXMuXHJcbiAgICpcclxuICAgKiBAcmV0dXJucyBUaGUgcmVzdWx0IG9mIGFwcGx5aW5nIHRoZSBleHByZXNzaW9uIHRvIGVhY2ggZWxlbWVudCBvZiB0aGUgYXJyYXkuXHJcbiAgICpcclxuICAgKiBAZXhhbXBsZSAkbWFwKHsgaW5wdXQ6IFsxLCAyLCAzXSwgYXM6ICdudW0nLCBpbjogeyAkYWRkOiBbJyQkbnVtJywgMV0gfSB9KSAvLyBbMiwgMywgNF1cclxuICAgKiBAZXhhbXBsZSAkbWFwKHsgaW5wdXQ6IFsnYScsICdiJ10sIGFzOiAnc3RyJywgaW46IHsgJHRvVXBwZXI6ICckJHN0cicgfSB9KSAvLyBbJ0EnLCAnQiddXHJcbiAgICovXG4gICRtYXA6IGZ1bmN0aW9uICRtYXAoYXJncywgdmFycykge1xuICAgIHZhciBhcnJheSA9IGV4cHJ5KGFyZ3MuaW5wdXQsIHZhcnMpO1xuICAgIGFzc2VydChhcnJheSwgW2lzQXJyYXldLCBcIlRoZSAkbWFwIG9wZXJhdG9yIHJlcXVpcmVzIGFuIGFycmF5IGFzIHRoZSBpbnB1dCBhcmd1bWVudC5cIik7XG4gICAgdmFyIGFzID0gZXhwcnkoYXJncy5hcywgdmFycyk7XG4gICAgYXNzZXJ0KGFzLCBbaXNTdHJpbmddLCBcIlRoZSAkbWFwIG9wZXJhdG9yIHJlcXVpcmVzIGEgc3RyaW5nIGFzIHRoZSBhcyBhcmd1bWVudC5cIik7XG4gICAgcmV0dXJuIGFycmF5Lm1hcChmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgIHZhciBfZXh0ZW5kczM7XG4gICAgICByZXR1cm4gZXhwcnkoYXJnc1tcImluXCJdLCBfZXh0ZW5kcyh7fSwgdmFycywgKF9leHRlbmRzMyA9IHt9LCBfZXh0ZW5kczNbXCIkXCIgKyBhc10gPSB2YWx1ZSwgX2V4dGVuZHMzKSkpO1xuICAgIH0pO1xuICB9LFxuICAvKipcclxuICAgKiBSZXR1cm5zIHRoZSBsYXJnZXN0IHZhbHVlcyBpbiBhbiBhcnJheS5cclxuICAgKlxyXG4gICAqIEBwYXJhbSBhcmdzIFRoZSBhcnJheSBhbmQgdGhlIG51bWJlciBvZiB2YWx1ZXMgKGV4cHJlc3Npb25zIGV2YWx1YXRpbmcgdG8gYW4gYXJyYXkgYW5kIGEgbnVtYmVyKS5cclxuICAgKiBAcGFyYW0gdmFycyBUaGUgdmFyaWFibGVzLlxyXG4gICAqXHJcbiAgICogQHJldHVybnMgVGhlIGxhcmdlc3QgdmFsdWVzIGluIHRoZSBhcnJheS5cclxuICAgKlxyXG4gICAqIEBleGFtcGxlICRtYXhOKHsgbjogMiwgaW5wdXQ6IFszLCA3LCAyLCA0XSB9IH0pIC8vIFs3LCA0XVxyXG4gICAqIEBleGFtcGxlICRtYXhOKHsgbjogMywgaW5wdXQ6IFszLCA3LCAyLCA0XSB9IH0pIC8vIFs3LCA0LCAzXVxyXG4gICAqIEBleGFtcGxlICRtYXhOKHsgbjogNSwgaW5wdXQ6IFszLCA3LCAyLCA0XSB9IH0pIC8vIFs3LCA0LCAzLCAyXVxyXG4gICAqL1xuICAkbWF4TjogZnVuY3Rpb24gJG1heE4oYXJncywgdmFycykge1xuICAgIHZhciBhcnJheSA9IGV4cHJ5KGFyZ3MuaW5wdXQsIHZhcnMpO1xuICAgIGFzc2VydChhcnJheSwgW2lzQXJyYXlPZlR5cGUoW2lzTnVtYmVyXSksIGlzQXJyYXlPZlR5cGUoW2lzU3RyaW5nXSldLCBcIlRoZSAkbWF4TiBvcGVyYXRvciByZXF1aXJlcyBhbiBhcnJheSBvZiBudW1iZXJzIG9yIGFuIGFycmF5IG9mIHN0cmluZ3MgYXMgdGhlIGlucHV0IGFyZ3VtZW50LlwiKTtcbiAgICB2YXIgbiA9IGV4cHJ5KGFyZ3MubiwgdmFycyk7XG4gICAgYXNzZXJ0KG4sIFtpc051bWJlcl0sIFwiVGhlICRtYXhOIG9wZXJhdG9yIHJlcXVpcmVzIGEgbnVtYmVyIGFzIHRoZSBuIGFyZ3VtZW50LlwiKTtcbiAgICByZXR1cm4gYXJyYXkuc29ydChmdW5jdGlvbiAoYSwgYikge1xuICAgICAgcmV0dXJuIGIgPiBhID8gMSA6IC0xO1xuICAgIH0pLnNsaWNlKDAsIG4pO1xuICB9LFxuICAvKipcclxuICAgKiBSZXR1cm5zIHRoZSBzbWFsbGVzdCB2YWx1ZXMgaW4gYW4gYXJyYXkuXHJcbiAgICpcclxuICAgKiBAcGFyYW0gYXJncyBUaGUgYXJyYXkgYW5kIHRoZSBudW1iZXIgb2YgdmFsdWVzIChleHByZXNzaW9ucyBldmFsdWF0aW5nIHRvIGFuIGFycmF5IGFuZCBhIG51bWJlcikuXHJcbiAgICogQHBhcmFtIHZhcnMgVGhlIHZhcmlhYmxlcy5cclxuICAgKlxyXG4gICAqIEByZXR1cm5zIFRoZSBzbWFsbGVzdCB2YWx1ZXMgaW4gdGhlIGFycmF5LlxyXG4gICAqXHJcbiAgICogQGV4YW1wbGUgJG1pbk4oeyBuOiAyLCBpbnB1dDogWzMsIDcsIDIsIDRdIH0gfSkgLy8gWzIsIDNdXHJcbiAgICogQGV4YW1wbGUgJG1pbk4oeyBuOiAzLCBpbnB1dDogWzMsIDcsIDIsIDRdIH0gfSkgLy8gWzIsIDMsIDRdXHJcbiAgICogQGV4YW1wbGUgJG1pbk4oeyBuOiA1LCBpbnB1dDogWzMsIDcsIDIsIDRdIH0gfSkgLy8gWzIsIDMsIDQsIDddXHJcbiAgICovXG4gICRtaW5OOiBmdW5jdGlvbiAkbWluTihhcmdzLCB2YXJzKSB7XG4gICAgdmFyIGFycmF5ID0gZXhwcnkoYXJncy5pbnB1dCwgdmFycyk7XG4gICAgYXNzZXJ0KGFycmF5LCBbaXNBcnJheU9mVHlwZShbaXNOdW1iZXJdKSwgaXNBcnJheU9mVHlwZShbaXNTdHJpbmddKV0sIFwiVGhlICRtaW5OIG9wZXJhdG9yIHJlcXVpcmVzIGFuIGFycmF5IG9mIG51bWJlcnMgb3IgYW4gYXJyYXkgb2Ygc3RyaW5ncyBhcyB0aGUgaW5wdXQgYXJndW1lbnQuXCIpO1xuICAgIHZhciBuID0gZXhwcnkoYXJncy5uLCB2YXJzKTtcbiAgICBhc3NlcnQobiwgW2lzTnVtYmVyXSwgXCJUaGUgJG1pbk4gb3BlcmF0b3IgcmVxdWlyZXMgYSBudW1iZXIgYXMgdGhlIG4gYXJndW1lbnQuXCIpO1xuICAgIHJldHVybiBhcnJheS5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgICByZXR1cm4gYSA+IGIgPyAxIDogLTE7XG4gICAgfSkuc2xpY2UoMCwgbik7XG4gIH0sXG4gIC8qKlxyXG4gICAqIEFjY3VtdWxhdGVzIHRoZSBlbGVtZW50cyBvZiBhbiBhcnJheSB1c2luZyBhbiBleHByZXNzaW9uIGFuZCByZXR1cm5zIHRoZSByZXN1bHQuXHJcbiAgICpcclxuICAgKiBAcGFyYW0gYXJncyBUaGUgYXJyYXksIHRoZSBpbml0aWFsIHZhbHVlLCBhbmQgdGhlIGV4cHJlc3Npb24gKGV4cHJlc3Npb25zIGV2YWx1YXRpbmcgdG8gYW4gYXJyYXksIGFueSB0eXBlLCBhbmQgYW55IHR5cGUpLlxyXG4gICAqIEBwYXJhbSB2YXJzIFRoZSB2YXJpYWJsZXMuXHJcbiAgICpcclxuICAgKiBAcmV0dXJucyBUaGUgcmVzdWx0IG9mIGFjY3VtdWxhdGluZyB0aGUgZWxlbWVudHMgb2YgdGhlIGFycmF5LlxyXG4gICAqXHJcbiAgICogQGV4YW1wbGUgJHJlZHVjZSh7IGlucHV0OiBbJ2EnLCAnYicsICdjJ10sIGluaXRpYWxWYWx1ZTogJycsIGluOiB7ICRjb25jYXQ6IFsnJCR2YWx1ZScsICckJHRoaXMnXSB9IH0pIC8vICdhYmMnXHJcbiAgICogQGV4YW1wbGUgJHJlZHVjZSh7IGlucHV0OiBbMSwgMiwgM10sIGluaXRpYWxWYWx1ZTogMCwgaW46IHsgJGFkZDogWyckJHZhbHVlJywgJyQkdGhpcyddIH0gfSB9KSAvLyA2XHJcbiAgICovXG4gICRyZWR1Y2U6IGZ1bmN0aW9uICRyZWR1Y2UoYXJncywgdmFycykge1xuICAgIHZhciBhcnJheSA9IGV4cHJ5KGFyZ3MuaW5wdXQsIHZhcnMpO1xuICAgIGFzc2VydChhcnJheSwgW2lzQXJyYXldLCBcIlRoZSAkcmVkdWNlIG9wZXJhdG9yIHJlcXVpcmVzIGFuIGFycmF5IGFzIHRoZSBpbnB1dCBhcmd1bWVudC5cIik7XG4gICAgdmFyIGluaXRpYWxWYWx1ZSA9IGV4cHJ5KGFyZ3MuaW5pdGlhbFZhbHVlLCB2YXJzKTtcbiAgICByZXR1cm4gYXJyYXkucmVkdWNlKGZ1bmN0aW9uIChhY2MsIHZhbHVlKSB7XG4gICAgICByZXR1cm4gZXhwcnkoYXJnc1tcImluXCJdLCBfZXh0ZW5kcyh7fSwgdmFycywge1xuICAgICAgICAkdmFsdWU6IGFjYyxcbiAgICAgICAgJHRoaXM6IHZhbHVlXG4gICAgICB9KSk7XG4gICAgfSwgaW5pdGlhbFZhbHVlKTtcbiAgfSxcbiAgLyoqXHJcbiAgICogUmV2ZXJzZXMgdGhlIGVsZW1lbnRzIG9mIGFuIGFycmF5LlxyXG4gICAqXHJcbiAgICogQHBhcmFtIGFyZ3MgVGhlIGFycmF5IChleHByZXNzaW9uIGV2YWx1YXRpbmcgdG8gYW4gYXJyYXkpLlxyXG4gICAqIEBwYXJhbSB2YXJzIFRoZSB2YXJpYWJsZXMuXHJcbiAgICpcclxuICAgKiBAcmV0dXJucyBUaGUgcmV2ZXJzZWQgYXJyYXkuXHJcbiAgICpcclxuICAgKiBAZXhhbXBsZSAkcmV2ZXJzZUFycmF5KFs0LCAyLCAzXSkgLy8gWzMsIDIsIDRdXHJcbiAgICogQGV4YW1wbGUgJHJldmVyc2VBcnJheShbJ2EnLCAnYycsICdiJ10pIC8vIFsnYicsICdjJywgJ2EnXVxyXG4gICAqL1xuICAkcmV2ZXJzZUFycmF5OiBmdW5jdGlvbiAkcmV2ZXJzZUFycmF5KGFyZ3MsIHZhcnMpIHtcbiAgICB2YXIgYXJyYXkgPSBleHByeShhcmdzLCB2YXJzKTtcbiAgICBhc3NlcnQoYXJyYXksIFtpc0FycmF5XSwgXCJUaGUgJHJldmVyc2VBcnJheSBvcGVyYXRvciByZXF1aXJlcyBhbiBhcnJheSBhcyBhcmd1bWVudC5cIik7XG4gICAgcmV0dXJuIGFycmF5LnJldmVyc2UoKTtcbiAgfSxcbiAgLyoqXHJcbiAgICogUmV0dXJucyB0aGUgbnVtYmVyIG9mIGVsZW1lbnRzIGluIGFuIGFycmF5LlxyXG4gICAqXHJcbiAgICogQHBhcmFtIGFyZ3MgVGhlIGFycmF5IChleHByZXNzaW9uIGV2YWx1YXRpbmcgdG8gYW4gYXJyYXkpLlxyXG4gICAqIEBwYXJhbSB2YXJzIFRoZSB2YXJpYWJsZXMuXHJcbiAgICpcclxuICAgKiBAcmV0dXJucyBUaGUgbnVtYmVyIG9mIGVsZW1lbnRzIGluIHRoZSBhcnJheS5cclxuICAgKlxyXG4gICAqIEBleGFtcGxlICRzaXplKFsxLCAyLCAzXSkgLy8gM1xyXG4gICAqIEBleGFtcGxlICRzaXplKFsnYScsICdiJywgJ2MnLCAnZCddKSAvLyA0XHJcbiAgICogQGV4YW1wbGUgJHNpemUoW10pIC8vIDBcclxuICAgKi9cbiAgJHNpemU6IGZ1bmN0aW9uICRzaXplKGFyZ3MsIHZhcnMpIHtcbiAgICB2YXIgYXJyYXkgPSBleHByeShhcmdzLCB2YXJzKTtcbiAgICBhc3NlcnQoYXJyYXksIFtpc0FycmF5XSwgXCJUaGUgJHNpemUgb3BlcmF0b3IgcmVxdWlyZXMgYW4gYXJyYXkgYXMgYXJndW1lbnQuXCIpO1xuICAgIHJldHVybiBhcnJheS5sZW5ndGg7XG4gIH0sXG4gIC8qKlxyXG4gICAqIFJldHVybnMgYSBzdWJzZXQgb2YgYW4gYXJyYXkuXHJcbiAgICpcclxuICAgKiBAcGFyYW0gYXJncyBUaGUgYXJyYXksIHRoZSBzdGFydGluZyBpbmRleCwgYW5kIHRoZSBudW1iZXIgb2YgZWxlbWVudHMgKGV4cHJlc3Npb25zIGV2YWx1YXRpbmcgdG8gYW4gYXJyYXksIGEgbnVtYmVyLCBhbmQgYSBudW1iZXIpLlxyXG4gICAqIEBwYXJhbSB2YXJzIFRoZSB2YXJpYWJsZXMuXHJcbiAgICpcclxuICAgKiBAcmV0dXJucyBUaGUgc3Vic2V0IG9mIHRoZSBhcnJheS5cclxuICAgKlxyXG4gICAqIEBleGFtcGxlICRzbGljZShbWzEsIDIsIDNdLCAxLCAxXSkgLy8gWzJdXHJcbiAgICogQGV4YW1wbGUgJHNsaWNlKFtbMSwgMiwgM10sIDEsIDJdKSAvLyBbMiwgM11cclxuICAgKiBAZXhhbXBsZSAkc2xpY2UoW1sxLCAyLCAzXSwgMSwgM10pIC8vIFsyLCAzXVxyXG4gICAqIEBleGFtcGxlICRzbGljZShbWzEsIDIsIDNdLCAzLCAyXSkgLy8gW11cclxuICAgKi9cbiAgJHNsaWNlOiBmdW5jdGlvbiAkc2xpY2UoYXJncywgdmFycykge1xuICAgIHZhciBhcnJheSA9IGV4cHJ5KGFyZ3NbMF0sIHZhcnMpO1xuICAgIGFzc2VydChhcnJheSwgW2lzQXJyYXldLCBcIlRoZSAkc2xpY2Ugb3BlcmF0b3IgcmVxdWlyZXMgYW4gYXJyYXkgYXMgdGhlIGZpcnN0IGFyZ3VtZW50LlwiKTtcbiAgICB2YXIgcG9zaXRpb24gPSBleHByeShhcmdzWzFdLCB2YXJzKTtcbiAgICBhc3NlcnQocG9zaXRpb24sIFtpc051bWJlcl0sIFwiVGhlICRzbGljZSBvcGVyYXRvciByZXF1aXJlcyBhIG51bWJlciBhcyB0aGUgc2Vjb25kIGFyZ3VtZW50LlwiKTtcbiAgICB2YXIgbiA9IGV4cHJ5KGFyZ3NbMl0sIHZhcnMpO1xuICAgIGFzc2VydChuLCBbaXNOdW1iZXJdLCBcIlRoZSAkc2xpY2Ugb3BlcmF0b3IgcmVxdWlyZXMgYSBudW1iZXIgYXMgdGhlIHRoaXJkIGFyZ3VtZW50LlwiKTtcbiAgICByZXR1cm4gYXJyYXkuc2xpY2UocG9zaXRpb24sIHBvc2l0aW9uICsgbik7XG4gIH0sXG4gIC8qKlxyXG4gICAqIFNvcnRzIHRoZSBlbGVtZW50cyBvZiBhbiBhcnJheS5cclxuICAgKlxyXG4gICAqIEBwYXJhbSBhcmdzIFRoZSBhcnJheSBhbmQgdGhlIGV4cHJlc3Npb24gdG8gc29ydCBieSAoZXhwcmVzc2lvbnMgZXZhbHVhdGluZyB0byBhbiBhcnJheSBhbmQgYSBudW1iZXIpLlxyXG4gICAqIEBwYXJhbSB2YXJzIFRoZSB2YXJpYWJsZXMuXHJcbiAgICpcclxuICAgKiBAcmV0dXJucyBUaGUgc29ydGVkIGFycmF5LlxyXG4gICAqXHJcbiAgICogQGV4YW1wbGUgJHNvcnRBcnJheSh7IGlucHV0OiBbMywgNCwgMl0sIHNvcnRCeTogeyAkY21wOiBbJyQkZmlyc3QnLCAnJCRzZWNvbmQnXSB9IH0pIC8vIFsyLCAzLCA0XVxyXG4gICAqIEBleGFtcGxlICRzb3J0QXJyYXkoeyBpbnB1dDogWzMsIDQsIDJdLCBzb3J0Qnk6IHsgJGNtcDogWyckJHNlY29uZCcsICckJGZpcnN0J10gfSB9KSAvLyBbNCwgMywgMl1cclxuICAgKi9cbiAgJHNvcnRBcnJheTogZnVuY3Rpb24gJHNvcnRBcnJheShhcmdzLCB2YXJzKSB7XG4gICAgdmFyIGFycmF5ID0gZXhwcnkoYXJncy5pbnB1dCwgdmFycyk7XG4gICAgYXNzZXJ0KGFycmF5LCBbaXNBcnJheV0sIFwiVGhlICRzb3J0QXJyYXkgb3BlcmF0b3IgcmVxdWlyZXMgYW4gYXJyYXkgYXMgdGhlIGlucHV0IGFyZ3VtZW50LlwiKTtcbiAgICByZXR1cm4gYXJyYXkuc29ydChmdW5jdGlvbiAoYSwgYikge1xuICAgICAgdmFyIHZhcmlhYmxlcyA9IF9leHRlbmRzKHt9LCB2YXJzLCB7XG4gICAgICAgICRmaXJzdDogYSxcbiAgICAgICAgJHNlY29uZDogYlxuICAgICAgfSk7XG4gICAgICB2YXIgbnVtYmVyID0gZXhwcnkoYXJncy5zb3J0QnksIHZhcmlhYmxlcyk7XG4gICAgICBhc3NlcnQobnVtYmVyLCBbaXNOdW1iZXJdLCBcIlRoZSAkc29ydEFycmF5IG9wZXJhdG9yIHJlcXVpcmVzIGEgbnVtYmVyIGFzIHRoZSBzb3J0QnkgYXJndW1lbnQuXCIpO1xuICAgICAgcmV0dXJuIG51bWJlcjtcbiAgICB9KTtcbiAgfVxufTtcblxudmFyIF9ib29sZWFuID0ge1xuICAvKipcclxuICAgKiBFdmFsdWF0ZXMgb25lIG9yIG1vcmUgZXhwcmVzc2lvbnMgYW5kIHJldHVybnMgdHJ1ZSBpZiBhbGwgb2YgdGhlIGV4cHJlc3Npb25zIGFyZSB0cnVlLiBPdGhlcndpc2UsIGl0IHJldHVybnMgZmFsc2UuXHJcbiAgICpcclxuICAgKiBAcGFyYW0gYXJncyBBbiBhcnJheSBvZiBib29sZWFucyAoZXhwcmVzc2lvbnMgZXZhbHVhdGluZyB0byBib29sZWFucykuXHJcbiAgICogQHBhcmFtIHZhcnMgVGhlIHZhcmlhYmxlcy5cclxuICAgKlxyXG4gICAqIEByZXR1cm5zIFRydWUgaWYgYWxsIG9mIHRoZSBleHByZXNzaW9ucyBhcmUgdHJ1ZS4gT3RoZXJ3aXNlLCBmYWxzZS5cclxuICAgKlxyXG4gICAqIEBleGFtcGxlICRhbmQoW3RydWUsIHRydWUsIHRydWVdKSAvLyB0cnVlXHJcbiAgICogQGV4YW1wbGUgJGFuZChbdHJ1ZSwgZmFsc2UsIHRydWVdKSAvLyBmYWxzZVxyXG4gICAqL1xuICAkYW5kOiBmdW5jdGlvbiAkYW5kKGFyZ3MsIHZhcnMpIHtcbiAgICByZXR1cm4gYXJncy5ldmVyeShmdW5jdGlvbiAoZXhwcikge1xuICAgICAgdmFyIF9ib29sZWFuMiA9IGV4cHJ5KGV4cHIsIHZhcnMpO1xuICAgICAgYXNzZXJ0KF9ib29sZWFuMiwgW2lzQm9vbGVhbl0sIFwiVGhlICRhbmQgb3BlcmF0b3IgcmVxdWlyZXMgYm9vbGVhbnMgYXMgYXJndW1lbnRzLlwiKTtcbiAgICAgIHJldHVybiBfYm9vbGVhbjI7XG4gICAgfSk7XG4gIH0sXG4gIC8qKlxyXG4gICAqIEV2YWx1YXRlcyBhIGJvb2xlYW4gYW5kIHJldHVybnMgdGhlIG9wcG9zaXRlIGJvb2xlYW4gdmFsdWUuXHJcbiAgICpcclxuICAgKiBAcGFyYW0gYXJncyBBIGJvb2xlYW4gKGV4cHJlc3Npb24gZXZhbHVhdGluZyB0byBhIGJvb2xlYW4pLlxyXG4gICAqIEBwYXJhbSB2YXJzIFRoZSB2YXJpYWJsZXMuXHJcbiAgICpcclxuICAgKiBAcmV0dXJucyBUaGUgb3Bwb3NpdGUgYm9vbGVhbiB2YWx1ZS5cclxuICAgKlxyXG4gICAqIEBleGFtcGxlICRub3QodHJ1ZSkgLy8gZmFsc2VcclxuICAgKiBAZXhhbXBsZSAkbm90KGZhbHNlKSAvLyB0cnVlXHJcbiAgICovXG4gICRub3Q6IGZ1bmN0aW9uICRub3QoYXJncywgdmFycykge1xuICAgIHZhciBfYm9vbGVhbjMgPSBleHByeShhcmdzLCB2YXJzKTtcbiAgICBhc3NlcnQoX2Jvb2xlYW4zLCBbaXNCb29sZWFuXSwgXCJUaGUgJG5vdCBvcGVyYXRvciByZXF1aXJlcyBhIGJvb2xlYW4gYXMgYXJndW1lbnQuXCIpO1xuICAgIHJldHVybiAhX2Jvb2xlYW4zO1xuICB9LFxuICAvKipcclxuICAgKiBFdmFsdWF0ZXMgb25lIG9yIG1vcmUgZXhwcmVzc2lvbnMgYW5kIHJldHVybnMgdHJ1ZSBpZiBhbnkgb2YgdGhlIGV4cHJlc3Npb25zIGFyZSB0cnVlLiBPdGhlcndpc2UsIGl0IHJldHVybnMgZmFsc2UuXHJcbiAgICpcclxuICAgKiBAcGFyYW0gYXJncyBBbiBhcnJheSBvZiBib29sZWFucyAoZXhwcmVzc2lvbnMgZXZhbHVhdGluZyB0byBib29sZWFucykuXHJcbiAgICogQHBhcmFtIHZhcnMgVGhlIHZhcmlhYmxlcy5cclxuICAgKlxyXG4gICAqIEByZXR1cm5zIFRydWUgaWYgYW55IG9mIHRoZSBleHByZXNzaW9ucyBhcmUgdHJ1ZS4gT3RoZXJ3aXNlLCBmYWxzZS5cclxuICAgKlxyXG4gICAqIEBleGFtcGxlICRvcihbdHJ1ZSwgZmFsc2UsIHRydWVdKSAvLyB0cnVlXHJcbiAgICogQGV4YW1wbGUgJG9yKFtmYWxzZSwgZmFsc2UsIGZhbHNlXSkgLy8gZmFsc2VcclxuICAgKi9cbiAgJG9yOiBmdW5jdGlvbiAkb3IoYXJncywgdmFycykge1xuICAgIHJldHVybiBhcmdzLnNvbWUoZnVuY3Rpb24gKGV4cHIpIHtcbiAgICAgIHZhciBfYm9vbGVhbjQgPSBleHByeShleHByLCB2YXJzKTtcbiAgICAgIGFzc2VydChfYm9vbGVhbjQsIFtpc0Jvb2xlYW5dLCBcIlRoZSAkb3Igb3BlcmF0b3IgcmVxdWlyZXMgYm9vbGVhbnMgYXMgYXJndW1lbnRzLlwiKTtcbiAgICAgIHJldHVybiBfYm9vbGVhbjQ7XG4gICAgfSk7XG4gIH1cbn07XG5cbnZhciBjb21wYXJpc29uID0ge1xuICAvKipcclxuICAgKiBDb21wYXJlcyB0d28gdmFsdWVzIGFuZCByZXR1cm5zIC0xIGlmIHRoZSBmaXJzdCBpcyBsZXNzIHRoYW4gdGhlIHNlY29uZCwgMSBpZiB0aGUgZmlyc3QgaXMgZ3JlYXRlciB0aGFuIHRoZSBzZWNvbmQsIGFuZCAwIGlmIHRoZSB0d28gdmFsdWVzIGFyZSBlcXVhbC5cclxuICAgKlxyXG4gICAqIEBwYXJhbSBhcmdzIEFuIGFycmF5IG9mIHR3byB2YWx1ZXMgKGV4cHJlc3Npb25zIGV2YWx1YXRpbmcgdG8gc3RyaW5ncyBvciBudW1iZXJzKS5cclxuICAgKiBAcGFyYW0gdmFycyBUaGUgdmFyaWFibGVzLlxyXG4gICAqXHJcbiAgICogQHJldHVybnMgVGhlIHJlc3VsdCBvZiBjb21wYXJpbmcgdGhlIHR3byB2YWx1ZXMuXHJcbiAgICpcclxuICAgKiBAZXhhbXBsZSAkY21wKFszLCA1XSkgLy8gLTFcclxuICAgKiBAZXhhbXBsZSAkY21wKFs1LCAzXSkgLy8gMVxyXG4gICAqIEBleGFtcGxlICRjbXAoWzMsIDNdKSAvLyAwXHJcbiAgICovXG4gICRjbXA6IGZ1bmN0aW9uICRjbXAoYXJncywgdmFycykge1xuICAgIHZhciB2YWx1ZXMgPSBbZXhwcnkoYXJnc1swXSwgdmFycyksIGV4cHJ5KGFyZ3NbMV0sIHZhcnMpXTtcbiAgICBhc3NlcnQodmFsdWVzLCBbaXNBcnJheU9mVHlwZShbaXNOdW1iZXJdKSwgaXNBcnJheU9mVHlwZShbaXNTdHJpbmddKV0sIFwiVGhlICRjbXAgb3BlcmF0b3IgcmVxdWlyZXMgdHdvIG51bWJlcnMgb3IgdHdvIHN0cmluZ3MgYXMgYXJndW1lbnRzLlwiKTtcbiAgICByZXR1cm4gdmFsdWVzWzBdIDwgdmFsdWVzWzFdID8gLTEgOiB2YWx1ZXNbMF0gPiB2YWx1ZXNbMV0gPyAxIDogMDtcbiAgfSxcbiAgLyoqXHJcbiAgICogQ29tcGFyZXMgdHdvIHZhbHVlcyBhbmQgcmV0dXJucyB0cnVlIGlmIHRoZXkgYXJlIGVxdWFsLiBPdGhlcndpc2UsIGl0IHJldHVybnMgZmFsc2UuXHJcbiAgICpcclxuICAgKiBAcGFyYW0gYXJncyBBbiBhcnJheSBvZiB0d28gdmFsdWVzIChleHByZXNzaW9ucyBldmFsdWF0aW5nIHRvIGFueSB0eXBlcykuXHJcbiAgICogQHBhcmFtIHZhcnMgVGhlIHZhcmlhYmxlcy5cclxuICAgKlxyXG4gICAqIEByZXR1cm5zIFRydWUgaWYgdGhlIHR3byB2YWx1ZXMgYXJlIGVxdWFsLiBPdGhlcndpc2UsIGZhbHNlLlxyXG4gICAqXHJcbiAgICogQGV4YW1wbGUgJGVxKFszLCAzXSkgLy8gdHJ1ZVxyXG4gICAqIEBleGFtcGxlICRlcShbJ2hlbGxvJywgJ2J5ZSddKSAvLyBmYWxzZVxyXG4gICAqL1xuICAkZXE6IGZ1bmN0aW9uICRlcShhcmdzLCB2YXJzKSB7XG4gICAgdmFyIGEgPSBleHByeShhcmdzWzBdLCB2YXJzKTtcbiAgICB2YXIgYiA9IGV4cHJ5KGFyZ3NbMV0sIHZhcnMpO1xuICAgIHJldHVybiBhID09PSBiO1xuICB9LFxuICAvKipcclxuICAgKiBDb21wYXJlcyB0d28gdmFsdWVzIGFuZCByZXR1cm5zIHRydWUgaWYgdGhlIGZpcnN0IGlzIGdyZWF0ZXIgdGhhbiB0aGUgc2Vjb25kLiBPdGhlcndpc2UsIGl0IHJldHVybnMgZmFsc2UuXHJcbiAgICpcclxuICAgKiBAcGFyYW0gYXJncyBBbiBhcnJheSBvZiB0d28gdmFsdWVzIChleHByZXNzaW9ucyBldmFsdWF0aW5nIHRvIHN0cmluZ3Mgb3IgbnVtYmVycykuXHJcbiAgICogQHBhcmFtIHZhcnMgVGhlIHZhcmlhYmxlcy5cclxuICAgKlxyXG4gICAqIEByZXR1cm5zIFRydWUgaWYgdGhlIGZpcnN0IHZhbHVlIGlzIGdyZWF0ZXIgdGhhbiB0aGUgc2Vjb25kLiBPdGhlcndpc2UsIGZhbHNlLlxyXG4gICAqXHJcbiAgICogQGV4YW1wbGUgJGd0KFs1LCAzXSkgLy8gdHJ1ZVxyXG4gICAqIEBleGFtcGxlICRndChbMywgNV0pIC8vIGZhbHNlXHJcbiAgICogQGV4YW1wbGUgJGd0KFszLCAzXSkgLy8gZmFsc2VcclxuICAgKi9cbiAgJGd0OiBmdW5jdGlvbiAkZ3QoYXJncywgdmFycykge1xuICAgIHZhciBhID0gZXhwcnkoYXJnc1swXSwgdmFycyk7XG4gICAgdmFyIGIgPSBleHByeShhcmdzWzFdLCB2YXJzKTtcbiAgICByZXR1cm4gYSA+IGI7XG4gIH0sXG4gIC8qKlxyXG4gICAqIENvbXBhcmVzIHR3byB2YWx1ZXMgYW5kIHJldHVybnMgdHJ1ZSBpZiB0aGUgZmlyc3QgaXMgZ3JlYXRlciB0aGFuIG9yIGVxdWFsIHRvIHRoZSBzZWNvbmQuIE90aGVyd2lzZSwgaXQgcmV0dXJucyBmYWxzZS5cclxuICAgKlxyXG4gICAqIEBwYXJhbSBhcmdzIEFuIGFycmF5IG9mIHR3byB2YWx1ZXMgKGV4cHJlc3Npb25zIGV2YWx1YXRpbmcgdG8gc3RyaW5ncyBvciBudW1iZXJzKS5cclxuICAgKiBAcGFyYW0gdmFycyBUaGUgdmFyaWFibGVzLlxyXG4gICAqXHJcbiAgICogQHJldHVybnMgVHJ1ZSBpZiB0aGUgZmlyc3QgdmFsdWUgaXMgZ3JlYXRlciB0aGFuIG9yIGVxdWFsIHRvIHRoZSBzZWNvbmQuIE90aGVyd2lzZSwgZmFsc2UuXHJcbiAgICpcclxuICAgKiBAZXhhbXBsZSAkZ3RlKFs1LCAzXSkgLy8gdHJ1ZVxyXG4gICAqIEBleGFtcGxlICRndGUoWzMsIDVdKSAvLyBmYWxzZVxyXG4gICAqIEBleGFtcGxlICRndGUoWzMsIDNdKSAvLyB0cnVlXHJcbiAgICovXG4gICRndGU6IGZ1bmN0aW9uICRndGUoYXJncywgdmFycykge1xuICAgIHZhciB2YWx1ZXMgPSBbZXhwcnkoYXJnc1swXSwgdmFycyksIGV4cHJ5KGFyZ3NbMV0sIHZhcnMpXTtcbiAgICBhc3NlcnQodmFsdWVzLCBbaXNBcnJheU9mVHlwZShbaXNOdW1iZXJdKSwgaXNBcnJheU9mVHlwZShbaXNTdHJpbmddKV0sIFwiVGhlICRndGUgb3BlcmF0b3IgcmVxdWlyZXMgdHdvIG51bWJlcnMgb3IgdHdvIHN0cmluZ3MgYXMgYXJndW1lbnRzLlwiKTtcbiAgICByZXR1cm4gdmFsdWVzWzBdID49IHZhbHVlc1sxXTtcbiAgfSxcbiAgLyoqXHJcbiAgICogQ29tcGFyZXMgdHdvIHZhbHVlcyBhbmQgcmV0dXJucyB0cnVlIGlmIHRoZSBmaXJzdCBpcyBsZXNzIHRoYW4gdGhlIHNlY29uZC4gT3RoZXJ3aXNlLCBpdCByZXR1cm5zIGZhbHNlLlxyXG4gICAqXHJcbiAgICogQHBhcmFtIGFyZ3MgQW4gYXJyYXkgb2YgdHdvIHZhbHVlcyAoZXhwcmVzc2lvbnMgZXZhbHVhdGluZyB0byBzdHJpbmdzIG9yIG51bWJlcnMpLlxyXG4gICAqIEBwYXJhbSB2YXJzIFRoZSB2YXJpYWJsZXMuXHJcbiAgICpcclxuICAgKiBAcmV0dXJucyBUcnVlIGlmIHRoZSBmaXJzdCB2YWx1ZSBpcyBsZXNzIHRoYW4gdGhlIHNlY29uZC4gT3RoZXJ3aXNlLCBmYWxzZS5cclxuICAgKlxyXG4gICAqIEBleGFtcGxlICRsdChbMywgNV0pIC8vIHRydWVcclxuICAgKiBAZXhhbXBsZSAkbHQoWzUsIDNdKSAvLyBmYWxzZVxyXG4gICAqIEBleGFtcGxlICRsdChbMywgM10pIC8vIGZhbHNlXHJcbiAgICovXG4gICRsdDogZnVuY3Rpb24gJGx0KGFyZ3MsIHZhcnMpIHtcbiAgICB2YXIgdmFsdWVzID0gW2V4cHJ5KGFyZ3NbMF0sIHZhcnMpLCBleHByeShhcmdzWzFdLCB2YXJzKV07XG4gICAgYXNzZXJ0KHZhbHVlcywgW2lzQXJyYXlPZlR5cGUoW2lzTnVtYmVyXSksIGlzQXJyYXlPZlR5cGUoW2lzU3RyaW5nXSldLCBcIlRoZSAkbHQgb3BlcmF0b3IgcmVxdWlyZXMgdHdvIG51bWJlcnMgb3IgdHdvIHN0cmluZ3MgYXMgYXJndW1lbnRzLlwiKTtcbiAgICByZXR1cm4gdmFsdWVzWzBdIDwgdmFsdWVzWzFdO1xuICB9LFxuICAvKipcclxuICAgKiBDb21wYXJlcyB0d28gdmFsdWVzIGFuZCByZXR1cm5zIHRydWUgaWYgdGhlIGZpcnN0IGlzIGxlc3MgdGhhbiBvciBlcXVhbCB0byB0aGUgc2Vjb25kLiBPdGhlcndpc2UsIGl0IHJldHVybnMgZmFsc2UuXHJcbiAgICpcclxuICAgKiBAcGFyYW0gYXJncyBBbiBhcnJheSBvZiB0d28gdmFsdWVzIChleHByZXNzaW9ucyBldmFsdWF0aW5nIHRvIHN0cmluZ3Mgb3IgbnVtYmVycykuXHJcbiAgICogQHBhcmFtIHZhcnMgVGhlIHZhcmlhYmxlcy5cclxuICAgKlxyXG4gICAqIEByZXR1cm5zIFRydWUgaWYgdGhlIGZpcnN0IHZhbHVlIGlzIGxlc3MgdGhhbiBvciBlcXVhbCB0byB0aGUgc2Vjb25kLiBPdGhlcndpc2UsIGZhbHNlLlxyXG4gICAqXHJcbiAgICogQGV4YW1wbGUgJGx0ZShbMywgNV0pIC8vIHRydWVcclxuICAgKiBAZXhhbXBsZSAkbHRlKFs1LCAzXSkgLy8gZmFsc2VcclxuICAgKiBAZXhhbXBsZSAkbHRlKFszLCAzXSkgLy8gdHJ1ZVxyXG4gICAqL1xuICAkbHRlOiBmdW5jdGlvbiAkbHRlKGFyZ3MsIHZhcnMpIHtcbiAgICB2YXIgdmFsdWVzID0gW2V4cHJ5KGFyZ3NbMF0sIHZhcnMpLCBleHByeShhcmdzWzFdLCB2YXJzKV07XG4gICAgYXNzZXJ0KHZhbHVlcywgW2lzQXJyYXlPZlR5cGUoW2lzTnVtYmVyXSksIGlzQXJyYXlPZlR5cGUoW2lzU3RyaW5nXSldLCBcIlRoZSAkbHRlIG9wZXJhdG9yIHJlcXVpcmVzIHR3byBudW1iZXJzIG9yIHR3byBzdHJpbmdzIGFzIGFyZ3VtZW50cy5cIik7XG4gICAgcmV0dXJuIHZhbHVlc1swXSA8PSB2YWx1ZXNbMV07XG4gIH0sXG4gIC8qKlxyXG4gICAqIENvbXBhcmVzIHR3byB2YWx1ZXMgYW5kIHJldHVybnMgdHJ1ZSBpZiB0aGV5IGFyZSBub3QgZXF1YWwuIE90aGVyd2lzZSwgaXQgcmV0dXJucyBmYWxzZS5cclxuICAgKlxyXG4gICAqIEBwYXJhbSBhcmdzIEFuIGFycmF5IG9mIHR3byB2YWx1ZXMgKGV4cHJlc3Npb25zIGV2YWx1YXRpbmcgdG8gYW55IHR5cGVzKS5cclxuICAgKiBAcGFyYW0gdmFycyBUaGUgdmFyaWFibGVzLlxyXG4gICAqXHJcbiAgICogQHJldHVybnMgVHJ1ZSBpZiB0aGUgdHdvIHZhbHVlcyBhcmUgbm90IGVxdWFsLiBPdGhlcndpc2UsIGZhbHNlLlxyXG4gICAqXHJcbiAgICogQGV4YW1wbGUgJG5lKFszLCAzXSkgLy8gZmFsc2VcclxuICAgKiBAZXhhbXBsZSAkbmUoWydoZWxsbycsICdieWUnXSkgLy8gdHJ1ZVxyXG4gICAqL1xuICAkbmU6IGZ1bmN0aW9uICRuZShhcmdzLCB2YXJzKSB7XG4gICAgdmFyIGEgPSBleHByeShhcmdzWzBdLCB2YXJzKTtcbiAgICB2YXIgYiA9IGV4cHJ5KGFyZ3NbMV0sIHZhcnMpO1xuICAgIHJldHVybiBhICE9PSBiO1xuICB9XG59O1xuXG52YXIgY29uZGl0aW9uYWwgPSB7XG4gIC8qKlxyXG4gICAqIEV2YWx1YXRlcyBhIGJvb2xlYW4gZXhwcmVzc2lvbiB0byByZXR1cm4gb25lIG9mIHRoZSB0d28gc3BlY2lmaWVkIHJldHVybiBleHByZXNzaW9ucy5cclxuICAgKlxyXG4gICAqIEBwYXJhbSBhcmdzIFRoZSBjb25kaXRpb24sIHRoZSB2YWx1ZSBpZiB0cnVlLCBhbmQgdGhlIHZhbHVlIGlmIGZhbHNlIChleHByZXNzaW9ucyBldmFsdWF0aW5nIHRvIGEgYm9vbGVhbiwgYW55IHR5cGUsIGFuZCBhbnkgdHlwZSkuXHJcbiAgICogQHBhcmFtIHZhcnMgVGhlIHZhcmlhYmxlcy5cclxuICAgKlxyXG4gICAqIEByZXR1cm5zIFRoZSAndGhlbicgdmFsdWUgaWYgdGhlIGNvbmRpdGlvbiBpcyB0cnVlLiBPdGhlcndpc2UsIHRoZSAnZWxzZScgdmFsdWUuXHJcbiAgICpcclxuICAgKiBAZXhhbXBsZSAkY29uZCh7IGlmOiB0cnVlLCB0aGVuOiAneWVzJywgZWxzZTogJ25vJyB9KSAvLyAneWVzJ1xyXG4gICAqIEBleGFtcGxlICRjb25kKHsgaWY6IGZhbHNlLCB0aGVuOiAneWVzJywgZWxzZTogJ25vJyB9KSAvLyAnbm8nXHJcbiAgICovXG4gICRjb25kOiBmdW5jdGlvbiAkY29uZChhcmdzLCB2YXJzKSB7XG4gICAgdmFyIGNvbmRpdGlvbiA9IGV4cHJ5KGFyZ3NbXCJpZlwiXSwgdmFycyk7XG4gICAgYXNzZXJ0KGNvbmRpdGlvbiwgW2lzQm9vbGVhbl0sIFwiVGhlICRjb25kIG9wZXJhdG9yIHJlcXVpcmVzIGEgYm9vbGVhbiBhcyB0aGUgaWYgYXJndW1lbnQuXCIpO1xuICAgIHJldHVybiBjb25kaXRpb24gPyBleHByeShhcmdzLnRoZW4sIHZhcnMpIDogZXhwcnkoYXJnc1tcImVsc2VcIl0sIHZhcnMpO1xuICB9LFxuICAvKipcclxuICAgKiBFdmFsdWF0ZXMgZXhwcmVzc2lvbnMgZm9yIG51bGwgdmFsdWVzIGFuZCByZXR1cm5zIHRoZSBmaXJzdCBub24tbnVsbCBleHByZXNzaW9uJ3MgdmFsdWUuIE90aGVyd2lzZSwgaXQgcmV0dXJucyB0aGUgbGFzdCBleHByZXNzaW9uJ3MgdmFsdWUuXHJcbiAgICpcclxuICAgKiBAcGFyYW0gYXJncyBUaGUgZXhwcmVzc2lvbnMgKGV4cHJlc3Npb25zIGV2YWx1YXRpbmcgdG8gYW55IHR5cGVzKS5cclxuICAgKiBAcGFyYW0gdmFycyBUaGUgdmFyaWFibGVzLlxyXG4gICAqXHJcbiAgICogQHJldHVybnMgVGhlIGZpcnN0IG5vbi1udWxsIGV4cHJlc3Npb24ncyB2YWx1ZS4gT3RoZXJ3aXNlLCB0aGUgbGFzdCBleHByZXNzaW9uJ3MgdmFsdWUuXHJcbiAgICpcclxuICAgKiBAZXhhbXBsZSAkaWZOdWxsKFtudWxsLCAnaGVsbG8nLCAnYnllJ10pIC8vICdoZWxsbydcclxuICAgKiBAZXhhbXBsZSAkaWZOdWxsKFtudWxsLCBudWxsLCAnYnllJ10pIC8vICdieWUnXHJcbiAgICogQGV4YW1wbGUgJGlmTnVsbChbbnVsbCwgbnVsbCwgbnVsbF0pIC8vIG51bGxcclxuICAgKi9cbiAgJGlmTnVsbDogZnVuY3Rpb24gJGlmTnVsbChhcmdzLCB2YXJzKSB7XG4gICAgZm9yICh2YXIgX2l0ZXJhdG9yID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXJMb29zZShhcmdzKSwgX3N0ZXA7ICEoX3N0ZXAgPSBfaXRlcmF0b3IoKSkuZG9uZTspIHtcbiAgICAgIHZhciBhcmcgPSBfc3RlcC52YWx1ZTtcbiAgICAgIHZhciB2YWx1ZSA9IGV4cHJ5KGFyZywgdmFycyk7XG4gICAgICBpZiAodmFsdWUgIT09IG51bGwpIHJldHVybiB2YWx1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGV4cHJ5KGFyZ3NbYXJncy5sZW5ndGggLSAxXSwgdmFycyk7XG4gIH0sXG4gIC8qKlxyXG4gICAqIEV2YWx1YXRlcyBhIHNlcmllcyBvZiBjYXNlIGV4cHJlc3Npb25zLiBXaGVuIGl0IGZpbmRzIGFuIGV4cHJlc3Npb24gd2hpY2ggZXZhbHVhdGVzIHRvIHRydWUsIGl0IHJldHVybnMgdGhlIHZhbHVlIG9mIHRoZSBjb3JyZXNwb25kaW5nIGV4cHJlc3Npb24uIElmIG5vIGV4cHJlc3Npb24gaXMgdHJ1ZSwgaXQgcmV0dXJucyB0aGUgdmFsdWUgb2YgdGhlIGRlZmF1bHQgZXhwcmVzc2lvbi5cclxuICAgKlxyXG4gICAqIEBwYXJhbSBhcmdzIFRoZSBicmFuY2hlcyBhbmQgdGhlIGRlZmF1bHQgdmFsdWUgKGV4cHJlc3Npb25zIGV2YWx1YXRpbmcgdG8gYm9vbGVhbnMgYW5kIGFueSB0eXBlcykuXHJcbiAgICogQHBhcmFtIHZhcnMgVGhlIHZhcmlhYmxlcy5cclxuICAgKlxyXG4gICAqIEByZXR1cm5zIFRoZSB2YWx1ZSBvZiB0aGUgZmlyc3QgdHJ1ZSBleHByZXNzaW9uLiBPdGhlcndpc2UsIHRoZSBkZWZhdWx0IHZhbHVlLlxyXG4gICAqXHJcbiAgICogQGV4YW1wbGUgJHN3aXRjaCh7IGJyYW5jaGVzOiBbeyBjYXNlOiBmYWxzZSwgdGhlbjogMSB9LCB7IGNhc2U6IHRydWUsIHRoZW46IDIgfV0sIGRlZmF1bHQ6IDMgfSB9KSAvLyAyXHJcbiAgICogQGV4YW1wbGUgJHN3aXRjaCh7IGJyYW5jaGVzOiBbeyBjYXNlOiBmYWxzZSwgdGhlbjogMSB9LCB7IGNhc2U6IGZhbHNlLCB0aGVuOiAyIH1dLCBkZWZhdWx0OiAzIH0gfSkgLy8gM1xyXG4gICAqL1xuICAkc3dpdGNoOiBmdW5jdGlvbiAkc3dpdGNoKGFyZ3MsIHZhcnMpIHtcbiAgICBmb3IgKHZhciBfaXRlcmF0b3IyID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXJMb29zZShhcmdzLmJyYW5jaGVzKSwgX3N0ZXAyOyAhKF9zdGVwMiA9IF9pdGVyYXRvcjIoKSkuZG9uZTspIHtcbiAgICAgIHZhciBicmFuY2ggPSBfc3RlcDIudmFsdWU7XG4gICAgICB2YXIgY29uZGl0aW9uID0gZXhwcnkoYnJhbmNoW1wiY2FzZVwiXSwgdmFycyk7XG4gICAgICBhc3NlcnQoY29uZGl0aW9uLCBbaXNCb29sZWFuXSwgXCJUaGUgJHN3aXRjaCBvcGVyYXRvciByZXF1aXJlcyBib29sZWFucyBhcyBjYXNlIGFyZ3VtZW50cy5cIik7XG4gICAgICBpZiAoY29uZGl0aW9uKSByZXR1cm4gZXhwcnkoYnJhbmNoLnRoZW4sIHZhcnMpO1xuICAgIH1cbiAgICByZXR1cm4gZXhwcnkoYXJnc1tcImRlZmF1bHRcIl0sIHZhcnMpO1xuICB9XG59O1xuXG52YXIgb2JqZWN0ID0ge1xuICAvKipcclxuICAgKiBHZXRzIHRoZSB2YWx1ZSBvZiBhIGZpZWxkIGluIGFuIG9iamVjdC4gSWYgdGhlIGZpZWxkIGRvZXMgbm90IGV4aXN0LCBpdCByZXR1cm5zIG51bGwuXHJcbiAgICpcclxuICAgKiBAcGFyYW0gYXJncyBUaGUgZmllbGQgYW5kIHRoZSBvYmplY3QgKGV4cHJlc3Npb25zIGV2YWx1YXRpbmcgdG8gYSBzdHJpbmcgYW5kIGFuIG9iamVjdCkuXHJcbiAgICogQHBhcmFtIHZhcnMgVGhlIHZhcmlhYmxlcy5cclxuICAgKlxyXG4gICAqIEByZXR1cm5zIFRoZSB2YWx1ZSBvZiB0aGUgZmllbGQuXHJcbiAgICpcclxuICAgKiBAZXhhbXBsZSAkZ2V0RmllbGQoeyBmaWVsZDogJ3F0eScsIGlucHV0OiB7IGl0ZW06ICdhcHBsZScsIHF0eTogMjUsIHByaWNlOiA0LjUgfSB9KSAvLyAyNVxyXG4gICAqL1xuICAkZ2V0RmllbGQ6IGZ1bmN0aW9uICRnZXRGaWVsZChhcmdzLCB2YXJzKSB7XG4gICAgdmFyIGZpZWxkID0gZXhwcnkoYXJncy5maWVsZCwgdmFycyk7XG4gICAgYXNzZXJ0KGZpZWxkLCBbaXNTdHJpbmddLCBcIlRoZSAkZ2V0RmllbGQgb3BlcmF0b3IgcmVxdWlyZXMgYSBzdHJpbmcgYXMgdGhlIGZpZWxkIGFyZ3VtZW50LlwiKTtcbiAgICB2YXIgaW5wdXQgPSBleHByeShhcmdzLmlucHV0LCB2YXJzKTtcbiAgICBhc3NlcnQoaW5wdXQsIFtpc09iamVjdF0sIFwiVGhlICRnZXRGaWVsZCBvcGVyYXRvciByZXF1aXJlcyBhbiBvYmplY3QgYXMgdGhlIGlucHV0IGFyZ3VtZW50LlwiKTtcbiAgICBpZiAoZmllbGQgaW4gaW5wdXQpIHJldHVybiBpbnB1dFtmaWVsZF07XG4gICAgcmV0dXJuIG51bGw7XG4gIH0sXG4gIC8qKlxyXG4gICAqIE1lcmdlcyBvYmplY3RzIGludG8gYSBzaW5nbGUgb2JqZWN0LlxyXG4gICAqXHJcbiAgICogQHBhcmFtIGFyZ3MgVGhlIG9iamVjdHMgKGV4cHJlc3Npb25zIGV2YWx1YXRpbmcgdG8gb2JqZWN0cykuXHJcbiAgICogQHBhcmFtIHZhcnMgVGhlIHZhcmlhYmxlcy5cclxuICAgKlxyXG4gICAqIEByZXR1cm5zIFRoZSBtZXJnZWQgb2JqZWN0LlxyXG4gICAqXHJcbiAgICogQGV4YW1wbGUgJG1lcmdlT2JqZWN0cyhbeyBpdGVtOiAnYXBwbGUnLCBxdHk6IDUsIHByaWNlOiAyLjUgfSwgeyBxdHk6IDEwLCBwcmljZTogMS4yLCBzYWxlOiB0cnVlIH1dKSAvLyB7IGl0ZW06ICdhcHBsZScsIHF0eTogMTAsIHByaWNlOiAxLjIsIHNhbGU6IHRydWUgfVxyXG4gICAqL1xuICAkbWVyZ2VPYmplY3RzOiBmdW5jdGlvbiAkbWVyZ2VPYmplY3RzKGFyZ3MsIHZhcnMpIHtcbiAgICByZXR1cm4gYXJncy5yZWR1Y2UoZnVuY3Rpb24gKGFjYywgYXJnKSB7XG4gICAgICB2YXIgb2JqZWN0ID0gZXhwcnkoYXJnLCB2YXJzKTtcbiAgICAgIGFzc2VydChvYmplY3QsIFtpc09iamVjdF0sIFwiVGhlICRtZXJnZU9iamVjdHMgb3BlcmF0b3IgcmVxdWlyZXMgb2JqZWN0cyBhcyBhcmd1bWVudHMuXCIpO1xuICAgICAgcmV0dXJuIF9leHRlbmRzKHt9LCBhY2MsIG9iamVjdCk7XG4gICAgfSwge30pO1xuICB9LFxuICAvKipcclxuICAgKiBTZXRzIGEgZmllbGQgaW4gYW4gb2JqZWN0IHRvIGEgc3BlY2lmaWVkIHZhbHVlLlxyXG4gICAqXHJcbiAgICogQHBhcmFtIGFyZ3MgVGhlIGZpZWxkLCB0aGUgb2JqZWN0LCBhbmQgdGhlIHZhbHVlIChleHByZXNzaW9ucyBldmFsdWF0aW5nIHRvIGEgc3RyaW5nLCBhbiBvYmplY3QsIGFuZCBhbnkgdHlwZSkuXHJcbiAgICogQHBhcmFtIHZhcnMgVGhlIHZhcmlhYmxlcy5cclxuICAgKlxyXG4gICAqIEByZXR1cm5zIFRoZSBvYmplY3Qgd2l0aCB0aGUgZmllbGQgc2V0IHRvIHRoZSB2YWx1ZS5cclxuICAgKlxyXG4gICAqIEBleGFtcGxlICRzZXRGaWVsZCh7IGZpZWxkOiAnaXRlbScsIGlucHV0OiB7IHF0eTogMjUsIHByaWNlOiA0LjUgfSwgdmFsdWU6ICdhcHBsZScgfSkgLy8geyBpdGVtOiAnYXBwbGUnLCBxdHk6IDI1LCBwcmljZTogNC41IH1cclxuICAgKi9cbiAgJHNldEZpZWxkOiBmdW5jdGlvbiAkc2V0RmllbGQoYXJncywgdmFycykge1xuICAgIHZhciBfZXh0ZW5kczI7XG4gICAgdmFyIGZpZWxkID0gZXhwcnkoYXJncy5maWVsZCwgdmFycyk7XG4gICAgYXNzZXJ0KGZpZWxkLCBbaXNTdHJpbmddLCBcIlRoZSAkc2V0RmllbGQgb3BlcmF0b3IgcmVxdWlyZXMgYSBzdHJpbmcgYXMgdGhlIGZpZWxkIGFyZ3VtZW50LlwiKTtcbiAgICB2YXIgaW5wdXQgPSBleHByeShhcmdzLmlucHV0LCB2YXJzKTtcbiAgICBhc3NlcnQoaW5wdXQsIFtpc09iamVjdF0sIFwiVGhlICRzZXRGaWVsZCBvcGVyYXRvciByZXF1aXJlcyBhbiBvYmplY3QgYXMgdGhlIGlucHV0IGFyZ3VtZW50LlwiKTtcbiAgICB2YXIgdmFsdWUgPSBleHByeShhcmdzLnZhbHVlLCB2YXJzKTtcbiAgICByZXR1cm4gX2V4dGVuZHMoe30sIGlucHV0LCAoX2V4dGVuZHMyID0ge30sIF9leHRlbmRzMltmaWVsZF0gPSB2YWx1ZSwgX2V4dGVuZHMyKSk7XG4gIH1cbn07XG5cbnZhciBzdHJpbmcgPSB7XG4gIC8qKlxyXG4gICAqIENvbmNhdGVuYXRlcyBzdHJpbmdzIHRvZ2V0aGVyLlxyXG4gICAqXHJcbiAgICogQHBhcmFtIGFyZ3MgVGhlIHN0cmluZ3MgKGV4cHJlc3Npb25zIGV2YWx1YXRpbmcgdG8gc3RyaW5ncykuXHJcbiAgICogQHBhcmFtIHZhcnMgVGhlIHZhcmlhYmxlcy5cclxuICAgKlxyXG4gICAqIEByZXR1cm5zIFRoZSByZXN1bHQgb2YgY29uY2F0ZW5hdGluZyB0aGUgc3RyaW5ncy5cclxuICAgKlxyXG4gICAqIEBleGFtcGxlICRjb25jYXQoWydoZWxsbycsICcgJywgJ3dvcmxkJ10pIC8vICdoZWxsbyB3b3JsZCdcclxuICAgKi9cbiAgJGNvbmNhdDogZnVuY3Rpb24gJGNvbmNhdChhcmdzLCB2YXJzKSB7XG4gICAgcmV0dXJuIGFyZ3MubWFwKGZ1bmN0aW9uIChhcmcpIHtcbiAgICAgIHZhciBzdHJpbmcgPSBleHByeShhcmcsIHZhcnMpO1xuICAgICAgYXNzZXJ0KHN0cmluZywgW2lzU3RyaW5nXSwgXCJUaGUgJGNvbmNhdCBvcGVyYXRvciByZXF1aXJlcyBzdHJpbmdzIGFzIGFyZ3VtZW50cy5cIik7XG4gICAgICByZXR1cm4gc3RyaW5nO1xuICAgIH0pLmpvaW4oXCJcIik7XG4gIH0sXG4gIC8qKlxyXG4gICAqIFJlbW92ZXMgd2hpdGVzcGFjZSBmcm9tIHRoZSBiZWdpbm5pbmcgb2YgYSBzdHJpbmcuXHJcbiAgICpcclxuICAgKiBAcGFyYW0gYXJncyBUaGUgc3RyaW5nIChleHByZXNzaW9uIGV2YWx1YXRpbmcgdG8gYSBzdHJpbmcpLlxyXG4gICAqIEBwYXJhbSB2YXJzIFRoZSB2YXJpYWJsZXMuXHJcbiAgICpcclxuICAgKiBAcmV0dXJucyBUaGUgc3RyaW5nIHdpdGggdGhlIHdoaXRlc3BhY2UgcmVtb3ZlZCBmcm9tIHRoZSBiZWdpbm5pbmcuXHJcbiAgICpcclxuICAgKiBAZXhhbXBsZSAkbHRyaW0oJyAgaGVsbG8nKSAvLyAnaGVsbG8nXHJcbiAgICovXG4gICRsdHJpbTogZnVuY3Rpb24gJGx0cmltKGFyZ3MsIHZhcnMpIHtcbiAgICB2YXIgc3RyaW5nID0gZXhwcnkoYXJncywgdmFycyk7XG4gICAgYXNzZXJ0KHN0cmluZywgW2lzU3RyaW5nXSwgXCJUaGUgJGx0cmltIG9wZXJhdG9yIHJlcXVpcmVzIGEgc3RyaW5nIGFzIGFyZ3VtZW50LlwiKTtcbiAgICByZXR1cm4gc3RyaW5nLnJlcGxhY2UoL15cXHMrLywgXCJcIik7XG4gIH0sXG4gIC8qKlxyXG4gICAqIFBlcmZvcm1zIGEgcmVndWxhciBleHByZXNzaW9uIGFuZCByZXR1cm5zIHRydWUgaWYgdGhlcmUgaXMgYSBtYXRjaC4gT3RoZXJ3aXNlLCBpdCByZXR1cm5zIGZhbHNlLlxyXG4gICAqXHJcbiAgICogQHBhcmFtIGFyZ3MgQSBzdHJpbmcgYW5kIGEgcmVndWxhciBleHByZXNzaW9uIChleHByZXNzaW9ucyBldmFsdWF0aW5nIHRvIHN0cmluZ3MpLlxyXG4gICAqIEBwYXJhbSB2YXJzIFRoZSB2YXJpYWJsZXMuXHJcbiAgICpcclxuICAgKiBAcmV0dXJucyBBIGJvb2xlYW4gaW5kaWNhdGluZyBpZiB0aGVyZSBpcyBhIG1hdGNoLlxyXG4gICAqXHJcbiAgICogQGV4YW1wbGUgJHJlZ2V4TWF0Y2goWydoZWxsbycsICcvZWxsLyddKSAvLyB0cnVlXHJcbiAgICogQGV4YW1wbGUgJHJlZ2V4TWF0Y2goWydoZWxsbycsICcvYnllLyddKSAvLyBmYWxzZVxyXG4gICAqL1xuICAkcmVnZXhNYXRjaDogZnVuY3Rpb24gJHJlZ2V4TWF0Y2goYXJncywgdmFycykge1xuICAgIHZhciBzdHJpbmcgPSBleHByeShhcmdzWzBdLCB2YXJzKTtcbiAgICBhc3NlcnQoc3RyaW5nLCBbaXNTdHJpbmddLCBcIlRoZSAkcmVnZXhNYXRjaCBvcGVyYXRvciByZXF1aXJlcyBhIHN0cmluZyBhcyB0aGUgZmlyc3QgYXJndW1lbnQuXCIpO1xuICAgIHZhciByZWdleCA9IGV4cHJ5KGFyZ3NbMV0sIHZhcnMpO1xuICAgIGFzc2VydChyZWdleCwgW2lzU3RyaW5nXSwgXCJUaGUgJHJlZ2V4TWF0Y2ggb3BlcmF0b3IgcmVxdWlyZXMgYSBzdHJpbmcgYXMgdGhlIHNlY29uZCBhcmd1bWVudC5cIik7XG4gICAgcmV0dXJuIHN0cmluZy5tYXRjaChyZWdleCkgIT09IG51bGw7XG4gIH0sXG4gIC8qKlxyXG4gICAqIFJlbW92ZXMgd2hpdGVzcGFjZSBmcm9tIHRoZSBlbmQgb2YgYSBzdHJpbmcuXHJcbiAgICpcclxuICAgKiBAcGFyYW0gYXJncyBUaGUgc3RyaW5nIChleHByZXNzaW9uIGV2YWx1YXRpbmcgdG8gYSBzdHJpbmcpLlxyXG4gICAqIEBwYXJhbSB2YXJzIFRoZSB2YXJpYWJsZXMuXHJcbiAgICpcclxuICAgKiBAcmV0dXJucyBUaGUgc3RyaW5nIHdpdGggdGhlIHdoaXRlc3BhY2UgcmVtb3ZlZCBmcm9tIHRoZSBlbmQuXHJcbiAgICpcclxuICAgKiBAZXhhbXBsZSAkcnRyaW0oJ2hlbGxvICAnKSAvLyAnaGVsbG8nXHJcbiAgICovXG4gICRydHJpbTogZnVuY3Rpb24gJHJ0cmltKGFyZ3MsIHZhcnMpIHtcbiAgICB2YXIgc3RyaW5nID0gZXhwcnkoYXJncywgdmFycyk7XG4gICAgYXNzZXJ0KHN0cmluZywgW2lzU3RyaW5nXSwgXCJUaGUgJHJ0cmltIG9wZXJhdG9yIHJlcXVpcmVzIGEgc3RyaW5nIGFzIGFyZ3VtZW50LlwiKTtcbiAgICByZXR1cm4gc3RyaW5nLnJlcGxhY2UoL1xccyskLywgXCJcIik7XG4gIH0sXG4gIC8qKlxyXG4gICAqIERpdmlkZXMgYSBzdHJpbmcgaW50byBhbiBhcnJheSBvZiBzdWJzdHJpbmdzIGJhc2VkIG9uIGEgZGVsaW1pdGVyLlxyXG4gICAqXHJcbiAgICogQHBhcmFtIGFyZ3MgQSBzdHJpbmcgYW5kIGEgZGVsaW1pdGVyIChleHByZXNzaW9ucyBldmFsdWF0aW5nIHRvIHN0cmluZ3MpLlxyXG4gICAqIEBwYXJhbSB2YXJzIFRoZSB2YXJpYWJsZXMuXHJcbiAgICpcclxuICAgKiBAcmV0dXJucyB7c3RyaW5nW119IFRoZSBhcnJheSBvZiBzdWJzdHJpbmdzLlxyXG4gICAqXHJcbiAgICogQGV4YW1wbGUgJHNwbGl0KFsnSnVuZS0xNS0yMDEzJywgJy0nXSkgLy8gWydKdW5lJywgJzE1JywgJzIwMTMnXVxyXG4gICAqIEBleGFtcGxlICRzcGxpdChbJ2hlbGxvIHdvcmxkJywgJyAnXSkgLy8gWydoZWxsbycsICd3b3JsZCddXHJcbiAgICovXG4gICRzcGxpdDogZnVuY3Rpb24gJHNwbGl0KGFyZ3MsIHZhcnMpIHtcbiAgICB2YXIgc3RyaW5nID0gZXhwcnkoYXJnc1swXSwgdmFycyk7XG4gICAgYXNzZXJ0KHN0cmluZywgW2lzU3RyaW5nXSwgXCJUaGUgJHNwbGl0IG9wZXJhdG9yIHJlcXVpcmVzIGEgc3RyaW5nIGFzIHRoZSBmaXJzdCBhcmd1bWVudC5cIik7XG4gICAgdmFyIGRlbGltaXRlciA9IGV4cHJ5KGFyZ3NbMV0sIHZhcnMpO1xuICAgIGFzc2VydChkZWxpbWl0ZXIsIFtpc1N0cmluZ10sIFwiVGhlICRzcGxpdCBvcGVyYXRvciByZXF1aXJlcyBhIHN0cmluZyBhcyB0aGUgc2Vjb25kIGFyZ3VtZW50LlwiKTtcbiAgICByZXR1cm4gc3RyaW5nLnNwbGl0KGRlbGltaXRlcik7XG4gIH0sXG4gIC8qKlxyXG4gICAqIFJldHVybnMgdGhlIGxlbmd0aCBvZiBhIHN0cmluZy5cclxuICAgKlxyXG4gICAqIEBwYXJhbSBhcmdzIFRoZSBzdHJpbmcgKGV4cHJlc3Npb24gZXZhbHVhdGluZyB0byBhIHN0cmluZykuXHJcbiAgICogQHBhcmFtIHZhcnMgVGhlIHZhcmlhYmxlcy5cclxuICAgKlxyXG4gICAqIEByZXR1cm5zIFRoZSBsZW5ndGggb2YgdGhlIHN0cmluZy5cclxuICAgKlxyXG4gICAqIEBleGFtcGxlICRzdHJMZW4oJ2hlbGxvJykgLy8gNVxyXG4gICAqL1xuICAkc3RyTGVuOiBmdW5jdGlvbiAkc3RyTGVuKGFyZ3MsIHZhcnMpIHtcbiAgICB2YXIgc3RyaW5nID0gZXhwcnkoYXJncywgdmFycyk7XG4gICAgYXNzZXJ0KHN0cmluZywgW2lzU3RyaW5nXSwgXCJUaGUgJHN0ckxlbiBvcGVyYXRvciByZXF1aXJlcyBhIHN0cmluZyBhcyBhcmd1bWVudC5cIik7XG4gICAgcmV0dXJuIHN0cmluZy5sZW5ndGg7XG4gIH0sXG4gIC8qKlxyXG4gICAqIFJldHVybnMgYSBzdWJzdHJpbmcgb2YgYSBzdHJpbmcuXHJcbiAgICpcclxuICAgKiBAcGFyYW0gYXJncyBUaGUgc3RyaW5nLCB0aGUgc3RhcnRpbmcgaW5kZXgsIGFuZCB0aGUgbnVtYmVyIG9mIGNoYXJhY3RlcnMgKGV4cHJlc3Npb25zIGV2YWx1YXRpbmcgdG8gYSBzdHJpbmcsIGEgbnVtYmVyLCBhbmQgYSBudW1iZXIpLlxyXG4gICAqIEBwYXJhbSB2YXJzIFRoZSB2YXJpYWJsZXMuXHJcbiAgICpcclxuICAgKiBAcmV0dXJucyBUaGUgc3Vic3RyaW5nIG9mIHRoZSBzdHJpbmcuXHJcbiAgICpcclxuICAgKiBAZXhhbXBsZSAkc3Vic3RyKFsnaGVsbG8nLCAwLCAyXSkgLy8gJ2hlJ1xyXG4gICAqL1xuICAkc3Vic3RyOiBmdW5jdGlvbiAkc3Vic3RyKGFyZ3MsIHZhcnMpIHtcbiAgICB2YXIgc3RyaW5nID0gZXhwcnkoYXJnc1swXSwgdmFycyk7XG4gICAgYXNzZXJ0KHN0cmluZywgW2lzU3RyaW5nXSwgXCJUaGUgJHN1YnN0ciBvcGVyYXRvciByZXF1aXJlcyBhIHN0cmluZyBhcyB0aGUgZmlyc3QgYXJndW1lbnQuXCIpO1xuICAgIHZhciBzdGFydCA9IGV4cHJ5KGFyZ3NbMV0sIHZhcnMpO1xuICAgIGFzc2VydChzdGFydCwgW2lzTnVtYmVyXSwgXCJUaGUgJHN1YnN0ciBvcGVyYXRvciByZXF1aXJlcyBhIG51bWJlciBhcyB0aGUgc2Vjb25kIGFyZ3VtZW50LlwiKTtcbiAgICB2YXIgbGVuZ3RoID0gZXhwcnkoYXJnc1syXSwgdmFycyk7XG4gICAgYXNzZXJ0KGxlbmd0aCwgW2lzTnVtYmVyXSwgXCJUaGUgJHN1YnN0ciBvcGVyYXRvciByZXF1aXJlcyBhIG51bWJlciBhcyB0aGUgdGhpcmQgYXJndW1lbnQuXCIpO1xuICAgIHJldHVybiBzdHJpbmcuc3Vic3RyaW5nKHN0YXJ0LCBzdGFydCArIGxlbmd0aCk7XG4gIH0sXG4gIC8qKlxyXG4gICAqIFJldHVybnMgdGhlIHN0cmluZyBjb252ZXJ0ZWQgdG8gbG93ZXJjYXNlLlxyXG4gICAqXHJcbiAgICogQHBhcmFtIGFyZ3MgVGhlIHN0cmluZyAoZXhwcmVzc2lvbiBldmFsdWF0aW5nIHRvIGEgc3RyaW5nKS5cclxuICAgKiBAcGFyYW0gdmFycyBUaGUgdmFyaWFibGVzLlxyXG4gICAqXHJcbiAgICogQHJldHVybnMgVGhlIHN0cmluZyBjb252ZXJ0ZWQgdG8gbG93ZXJjYXNlLlxyXG4gICAqXHJcbiAgICogQGV4YW1wbGUgJHRvTG93ZXIoJ01hcnRpIFNlcnJhJykgLy8gJ21hcnRpIHNlcnJhJ1xyXG4gICAqL1xuICAkdG9Mb3dlcjogZnVuY3Rpb24gJHRvTG93ZXIoYXJncywgdmFycykge1xuICAgIHZhciBzdHJpbmcgPSBleHByeShhcmdzLCB2YXJzKTtcbiAgICBhc3NlcnQoc3RyaW5nLCBbaXNTdHJpbmddLCBcIlRoZSAkdG9Mb3dlciBvcGVyYXRvciByZXF1aXJlcyBhIHN0cmluZyBhcyBhcmd1bWVudC5cIik7XG4gICAgcmV0dXJuIHN0cmluZy50b0xvd2VyQ2FzZSgpO1xuICB9LFxuICAvKipcclxuICAgKiBSZW1vdmVzIHdoaXRlc3BhY2UgZnJvbSB0aGUgYmVnaW5uaW5nIGFuZCBlbmQgb2YgYSBzdHJpbmcuXHJcbiAgICpcclxuICAgKiBAcGFyYW0gYXJncyBUaGUgc3RyaW5nIChleHByZXNzaW9uIGV2YWx1YXRpbmcgdG8gYSBzdHJpbmcpLlxyXG4gICAqIEBwYXJhbSB2YXJzIFRoZSB2YXJpYWJsZXMuXHJcbiAgICpcclxuICAgKiBAcmV0dXJucyBUaGUgc3RyaW5nIHdpdGggdGhlIHdoaXRlc3BhY2UgcmVtb3ZlZCBmcm9tIHRoZSBiZWdpbm5pbmcgYW5kIGVuZC5cclxuICAgKlxyXG4gICAqIEBleGFtcGxlICR0cmltKCcgIGhlbGxvICAnKSAvLyAnaGVsbG8nXHJcbiAgICovXG4gICR0cmltOiBmdW5jdGlvbiAkdHJpbShhcmdzLCB2YXJzKSB7XG4gICAgdmFyIHN0cmluZyA9IGV4cHJ5KGFyZ3MsIHZhcnMpO1xuICAgIGFzc2VydChzdHJpbmcsIFtpc1N0cmluZ10sIFwiVGhlICR0cmltIG9wZXJhdG9yIHJlcXVpcmVzIGEgc3RyaW5nIGFzIGFyZ3VtZW50LlwiKTtcbiAgICByZXR1cm4gc3RyaW5nLnRyaW0oKTtcbiAgfSxcbiAgLyoqXHJcbiAgICogUmV0dXJucyB0aGUgc3RyaW5nIGNvbnZlcnRlZCB0byB1cHBlcmNhc2UuXHJcbiAgICpcclxuICAgKiBAcGFyYW0gYXJncyBUaGUgc3RyaW5nIChleHByZXNzaW9uIGV2YWx1YXRpbmcgdG8gYSBzdHJpbmcpLlxyXG4gICAqIEBwYXJhbSB2YXJzIFRoZSB2YXJpYWJsZXMuXHJcbiAgICpcclxuICAgKiBAcmV0dXJucyBUaGUgc3RyaW5nIGNvbnZlcnRlZCB0byB1cHBlcmNhc2UuXHJcbiAgICpcclxuICAgKiBAZXhhbXBsZSAkdG9VcHBlcignTWFydGkgU2VycmEnKSAvLyAnTUFSVEkgU0VSUkEnXHJcbiAgICovXG4gICR0b1VwcGVyOiBmdW5jdGlvbiAkdG9VcHBlcihhcmdzLCB2YXJzKSB7XG4gICAgdmFyIHN0cmluZyA9IGV4cHJ5KGFyZ3MsIHZhcnMpO1xuICAgIGFzc2VydChzdHJpbmcsIFtpc1N0cmluZ10sIFwiVGhlICR0b1VwcGVyIG9wZXJhdG9yIHJlcXVpcmVzIGEgc3RyaW5nIGFzIGFyZ3VtZW50LlwiKTtcbiAgICByZXR1cm4gc3RyaW5nLnRvVXBwZXJDYXNlKCk7XG4gIH1cbn07XG5cbnZhciB0eXBlID0ge1xuICAvKipcclxuICAgKiBSZXR1cm5zIHRydWUgaWYgdGhlIHZhbHVlIGlzIGEgYm9vbGVhbi4gT3RoZXJ3aXNlLCBpdCByZXR1cm5zIGZhbHNlLlxyXG4gICAqXHJcbiAgICogQHBhcmFtIGFyZ3MgVGhlIHZhbHVlIChleHByZXNzaW9uIGV2YWx1YXRpbmcgdG8gYW55IHR5cGUpLlxyXG4gICAqIEBwYXJhbSB2YXJzIFRoZSB2YXJpYWJsZXMuXHJcbiAgICpcclxuICAgKiBAcmV0dXJucyBUcnVlIGlmIHRoZSB2YWx1ZSBpcyBhIGJvb2xlYW4uIE90aGVyd2lzZSwgZmFsc2UuXHJcbiAgICpcclxuICAgKiBAZXhhbXBsZSAkaXNCb29sZWFuKGZhbHNlKSAvLyB0cnVlXHJcbiAgICogQGV4YW1wbGUgJGlzQm9vbGVhbig1KSAvLyBmYWxzZVxyXG4gICAqIEBleGFtcGxlICRpc0Jvb2xlYW4oJ2hlbGxvJykgLy8gZmFsc2VcclxuICAgKi9cbiAgJGlzQm9vbGVhbjogZnVuY3Rpb24gJGlzQm9vbGVhbihhcmdzLCB2YXJzKSB7XG4gICAgdmFyIHZhbHVlID0gZXhwcnkoYXJncywgdmFycyk7XG4gICAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gXCJib29sZWFuXCI7XG4gIH0sXG4gIC8qKlxyXG4gICAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgdmFsdWUgaXMgYSBudW1iZXIuIE90aGVyd2lzZSwgaXQgcmV0dXJucyBmYWxzZS5cclxuICAgKlxyXG4gICAqIEBwYXJhbSBhcmdzIFRoZSB2YWx1ZSAoZXhwcmVzc2lvbiBldmFsdWF0aW5nIHRvIGFueSB0eXBlKS5cclxuICAgKiBAcGFyYW0gdmFycyBUaGUgdmFyaWFibGVzLlxyXG4gICAqXHJcbiAgICogQHJldHVybnMgVHJ1ZSBpZiB0aGUgdmFsdWUgaXMgYSBudW1iZXIuIE90aGVyd2lzZSwgZmFsc2UuXHJcbiAgICpcclxuICAgKiBAZXhhbXBsZSAkaXNOdW1iZXIoNSkgLy8gdHJ1ZVxyXG4gICAqIEBleGFtcGxlICRpc051bWJlcih0cnVlKSAvLyBmYWxzZVxyXG4gICAqIEBleGFtcGxlICRpc051bWJlcignaGVsbG8nKSAvLyBmYWxzZVxyXG4gICAqL1xuICAkaXNOdW1iZXI6IGZ1bmN0aW9uICRpc051bWJlcihhcmdzLCB2YXJzKSB7XG4gICAgdmFyIHZhbHVlID0gZXhwcnkoYXJncywgdmFycyk7XG4gICAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gXCJudW1iZXJcIjtcbiAgfSxcbiAgLyoqXHJcbiAgICogUmV0dXJucyB0cnVlIGlmIHRoZSB2YWx1ZSBpcyBhIHN0cmluZy4gT3RoZXJ3aXNlLCBpdCByZXR1cm5zIGZhbHNlLlxyXG4gICAqXHJcbiAgICogQHBhcmFtIGFyZ3MgVGhlIHZhbHVlIChleHByZXNzaW9uIGV2YWx1YXRpbmcgdG8gYW55IHR5cGUpLlxyXG4gICAqIEBwYXJhbSB2YXJzIFRoZSB2YXJpYWJsZXMuXHJcbiAgICpcclxuICAgKiBAcmV0dXJucyBUcnVlIGlmIHRoZSB2YWx1ZSBpcyBhIHN0cmluZy4gT3RoZXJ3aXNlLCBmYWxzZS5cclxuICAgKlxyXG4gICAqIEBleGFtcGxlICRpc1N0cmluZygnaGVsbG8nKSAvLyB0cnVlXHJcbiAgICogQGV4YW1wbGUgJGlzU3RyaW5nKDUpIC8vIGZhbHNlXHJcbiAgICogQGV4YW1wbGUgJGlzU3RyaW5nKHRydWUpIC8vIGZhbHNlXHJcbiAgICovXG4gICRpc1N0cmluZzogZnVuY3Rpb24gJGlzU3RyaW5nKGFyZ3MsIHZhcnMpIHtcbiAgICB2YXIgdmFsdWUgPSBleHByeShhcmdzLCB2YXJzKTtcbiAgICByZXR1cm4gdHlwZW9mIHZhbHVlID09PSBcInN0cmluZ1wiO1xuICB9LFxuICAvKipcclxuICAgKiBDb252ZXJ0cyBhIHZhbHVlIHRvIGEgYm9vbGVhbi5cclxuICAgKlxyXG4gICAqIEBwYXJhbSBhcmdzIFRoZSB2YWx1ZSAoZXhwcmVzc2lvbiBldmFsdWF0aW5nIHRvIGFueSB0eXBlKS5cclxuICAgKiBAcGFyYW0gdmFycyBUaGUgdmFyaWFibGVzLlxyXG4gICAqXHJcbiAgICogQHJldHVybnMgVGhlIGNvbnZlcnRlZCB2YWx1ZS5cclxuICAgKlxyXG4gICAqIEBleGFtcGxlICR0b0Jvb2xlYW4oJ2hlbGxvJykgLy8gdHJ1ZVxyXG4gICAqIEBleGFtcGxlICR0b0Jvb2xlYW4oJycpIC8vIGZhbHNlXHJcbiAgICogQGV4YW1wbGUgJHRvQm9vbGVhbig1KSAvLyB0cnVlXHJcbiAgICogQGV4YW1wbGUgJHRvQm9vbGVhbigwKSAvLyBmYWxzZVxyXG4gICAqL1xuICAkdG9Cb29sZWFuOiBmdW5jdGlvbiAkdG9Cb29sZWFuKGFyZ3MsIHZhcnMpIHtcbiAgICB2YXIgdmFsdWUgPSBleHByeShhcmdzLCB2YXJzKTtcbiAgICByZXR1cm4gQm9vbGVhbih2YWx1ZSk7XG4gIH0sXG4gIC8qKlxyXG4gICAqIENvbnZlcnRzIGEgdmFsdWUgdG8gYSBudW1iZXIuIElmIHRoZSB2YWx1ZSBjYW5ub3QgYmUgY29udmVydGVkLCBpdCByZXR1cm5zIG51bGwuXHJcbiAgICpcclxuICAgKiBAcGFyYW0gYXJncyBUaGUgdmFsdWUgKGV4cHJlc3Npb24gZXZhbHVhdGluZyB0byBhbnkgdHlwZSkuXHJcbiAgICogQHBhcmFtIHZhcnMgVGhlIHZhcmlhYmxlcy5cclxuICAgKlxyXG4gICAqIEByZXR1cm5zIFRoZSBjb252ZXJ0ZWQgdmFsdWUuXHJcbiAgICpcclxuICAgKiBAZXhhbXBsZSAkdG9OdW1iZXIoJzUnKSAvLyA1XHJcbiAgICogQGV4YW1wbGUgJHRvTnVtYmVyKCdoZWxsbycpIC8vIE5hTlxyXG4gICAqL1xuICAkdG9OdW1iZXI6IGZ1bmN0aW9uICR0b051bWJlcihhcmdzLCB2YXJzKSB7XG4gICAgdmFyIHZhbHVlID0gZXhwcnkoYXJncywgdmFycyk7XG4gICAgcmV0dXJuIE51bWJlcih2YWx1ZSk7XG4gIH0sXG4gIC8qKlxyXG4gICAqIENvbnZlcnRzIGEgdmFsdWUgdG8gYSBzdHJpbmcuXHJcbiAgICpcclxuICAgKiBAcGFyYW0gYXJncyBUaGUgdmFsdWUgKGV4cHJlc3Npb24gZXZhbHVhdGluZyB0byBhbnkgdHlwZSkuXHJcbiAgICogQHBhcmFtIHZhcnMgVGhlIHZhcmlhYmxlcy5cclxuICAgKlxyXG4gICAqIEByZXR1cm5zIFRoZSBjb252ZXJ0ZWQgdmFsdWUuXHJcbiAgICpcclxuICAgKiBAZXhhbXBsZSAkdG9TdHJpbmcoNSkgLy8gJzUnXHJcbiAgICogQGV4YW1wbGUgJHRvU3RyaW5nKHRydWUpIC8vICd0cnVlJ1xyXG4gICAqL1xuICAkdG9TdHJpbmc6IGZ1bmN0aW9uICR0b1N0cmluZyhhcmdzLCB2YXJzKSB7XG4gICAgdmFyIHZhbHVlID0gZXhwcnkoYXJncywgdmFycyk7XG4gICAgcmV0dXJuIFN0cmluZyh2YWx1ZSk7XG4gIH1cbn07XG5cbnZhciB2YXJpYWJsZSA9IHtcbiAgLyoqXHJcbiAgICogQmluZHMgdmFyaWFibGVzIGZvciB1c2UgaW4gdGhlIHNwZWNpZmllZCBleHByZXNzaW9uLCBhbmQgcmV0dXJucyB0aGUgcmVzdWx0IG9mIHRoZSBleHByZXNzaW9uLlxyXG4gICAqXHJcbiAgICogQHBhcmFtIGFyZ3MgVGhlIHZhcmlhYmxlcyBhbmQgdGhlIGV4cHJlc3Npb24gKGV4cHJlc3Npb25zIGV2YWx1YXRpbmcgdG8gYW55IHR5cGVzKS5cclxuICAgKiBAcGFyYW0gdmFycyBUaGUgdmFyaWFibGVzLlxyXG4gICAqXHJcbiAgICogQHJldHVybnMgVGhlIHJlc3VsdCBvZiB0aGUgZXhwcmVzc2lvbi5cclxuICAgKlxyXG4gICAqIEBleGFtcGxlICRsZXQoeyB2YXJzOiB7IGFnZTogMjQgfSwgaW46IHsgaXNBZHVsdDogeyAkZ3RlOiBbJyQkYWdlJywgMThdIH0gfSB9KSAvLyB7IGlzQWR1bHQ6IHRydWUgfVxyXG4gICAqL1xuICAkbGV0OiBmdW5jdGlvbiAkbGV0KGFyZ3MsIHZhcnMpIHtcbiAgICB2YXIgdmFyaWFibGVzID0gT2JqZWN0LmZyb21FbnRyaWVzKE9iamVjdC5lbnRyaWVzKGFyZ3MudmFycykubWFwKGZ1bmN0aW9uIChfcmVmKSB7XG4gICAgICB2YXIga2V5ID0gX3JlZlswXSxcbiAgICAgICAgdmFsdWUgPSBfcmVmWzFdO1xuICAgICAgcmV0dXJuIFtcIiRcIiArIGtleSwgZXhwcnkodmFsdWUsIHZhcnMpXTtcbiAgICB9KSk7XG4gICAgcmV0dXJuIGV4cHJ5KGFyZ3NbXCJpblwiXSwgX2V4dGVuZHMoe30sIHZhcnMsIHZhcmlhYmxlcykpO1xuICB9XG59O1xuXG52YXIgb3BlcmF0aW9ucyA9IC8qI19fUFVSRV9fKi9fZXh0ZW5kcyh7fSwgYXJpdGhtZXRpYywgYXJyYXksIF9ib29sZWFuLCBjb21wYXJpc29uLCBjb25kaXRpb25hbCwgb2JqZWN0LCBzdHJpbmcsIHR5cGUsIHZhcmlhYmxlKTtcblxuLyoqXHJcbiAqIEl0IGV2YWx1YXRlcyB0aGUgZXhwcmVzc2lvbiB3aXRoIHRoZSBnaXZlbiB2YXJpYWJsZXMuXHJcbiAqXHJcbiAqIEBwYXJhbSBleHByIFRoZSBleHByZXNzaW9uLlxyXG4gKiBAcGFyYW0gdmFycyBUaGUgdmFyaWFibGVzIHRvIGV2YWx1YXRlIHRoZSBleHByZXNzaW9uIHdpdGguXHJcbiAqXHJcbiAqIEByZXR1cm5zIFRoZSByZXN1bHQgb2YgdGhlIGV4cHJlc3Npb24uXHJcbiAqL1xuZnVuY3Rpb24gZXhwcnkoZXhwciwgdmFycykge1xuICBpZiAodmFycyA9PT0gdm9pZCAwKSB7XG4gICAgdmFycyA9IHt9O1xuICB9XG4gIGlmIChpc0FycihleHByKSkgcmV0dXJuIGV2YWxBcnIoZXhwciwgdmFycyk7XG4gIGlmIChpc09iaihleHByKSkgcmV0dXJuIGV2YWxPYmooZXhwciwgdmFycyk7XG4gIGlmIChpc1N0cihleHByKSkgcmV0dXJuIGV2YWxTdHIoZXhwciwgdmFycyk7XG4gIHJldHVybiBleHByO1xufVxuZnVuY3Rpb24gaXNBcnIoZXhwcikge1xuICByZXR1cm4gQXJyYXkuaXNBcnJheShleHByKTtcbn1cbmZ1bmN0aW9uIGV2YWxBcnIoZXhwciwgdmFycykge1xuICByZXR1cm4gZXhwci5tYXAoZnVuY3Rpb24gKGV4cHJlc3Npb24pIHtcbiAgICByZXR1cm4gZXhwcnkoZXhwcmVzc2lvbiwgdmFycyk7XG4gIH0pO1xufVxuZnVuY3Rpb24gaXNPYmooZXhwcikge1xuICByZXR1cm4gdHlwZW9mIGV4cHIgPT09IFwib2JqZWN0XCIgJiYgIUFycmF5LmlzQXJyYXkoZXhwcikgJiYgZXhwciAhPT0gbnVsbDtcbn1cbmZ1bmN0aW9uIGV2YWxPYmooZXhwciwgdmFycykge1xuICBpZiAoaXNPcGVyYXRvcihleHByKSkgcmV0dXJuIGV2YWxPcGVyYXRvcihleHByLCB2YXJzKTtcbiAgcmV0dXJuIGV2YWxPYmpWYWx1ZShleHByLCB2YXJzKTtcbn1cbmZ1bmN0aW9uIGlzT3BlcmF0b3IoZXhwcikge1xuICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKGV4cHIpO1xuICBpZiAoa2V5cy5sZW5ndGggPT09IDEpIHJldHVybiBrZXlzWzBdIGluIG9wZXJhdGlvbnM7XG4gIHJldHVybiBmYWxzZTtcbn1cbmZ1bmN0aW9uIGV2YWxPcGVyYXRvcihleHByLCB2YXJzKSB7XG4gIHZhciBrZXkgPSBPYmplY3Qua2V5cyhleHByKVswXTtcbiAgdmFyIG9wZXJhdG9yID0gb3BlcmF0aW9uc1trZXldO1xuICByZXR1cm4gb3BlcmF0b3IoZXhwcltrZXldLCB2YXJzKTtcbn1cbmZ1bmN0aW9uIGV2YWxPYmpWYWx1ZShleHByLCB2YXJzKSB7XG4gIHJldHVybiBPYmplY3QuZnJvbUVudHJpZXMoT2JqZWN0LmVudHJpZXMoZXhwcikubWFwKGZ1bmN0aW9uIChfcmVmKSB7XG4gICAgdmFyIGtleSA9IF9yZWZbMF0sXG4gICAgICBleHByID0gX3JlZlsxXTtcbiAgICByZXR1cm4gW2V2YWxTdHJWYWx1ZShrZXkpLCBleHByeShleHByLCB2YXJzKV07XG4gIH0pKTtcbn1cbmZ1bmN0aW9uIGlzU3RyKGV4cHIpIHtcbiAgcmV0dXJuIHR5cGVvZiBleHByID09PSBcInN0cmluZ1wiO1xufVxuZnVuY3Rpb24gZXZhbFN0cihleHByLCB2YXJzKSB7XG4gIGlmIChpc1ZhcmlhYmxlKGV4cHIpKSByZXR1cm4gZXZhbFZhcmlhYmxlKGV4cHIsIHZhcnMpO1xuICByZXR1cm4gZXZhbFN0clZhbHVlKGV4cHIpO1xufVxuZnVuY3Rpb24gaXNWYXJpYWJsZShleHByKSB7XG4gIHJldHVybiBleHByLnN0YXJ0c1dpdGgoXCIkXCIpO1xufVxuZnVuY3Rpb24gZXZhbFZhcmlhYmxlKGV4cHIsIHZhcnMpIHtcbiAgdmFyIHBhcnRzID0gZXhwci5zbGljZSgxKS5zcGxpdChcIi5cIik7XG4gIHJldHVybiBwYXJ0cy5yZWR1Y2UoZnVuY3Rpb24gKGFjYywga2V5KSB7XG4gICAgaWYgKGlzT2JqKGFjYykgJiYga2V5IGluIGFjYykgcmV0dXJuIGFjY1trZXldO1xuICAgIGlmIChpc0FycihhY2MpICYmIGtleSBpbiBhY2MpIHJldHVybiBhY2NbTnVtYmVyKGtleSldO1xuICAgIHJldHVybiBudWxsO1xuICB9LCB2YXJzKTtcbn1cbmZ1bmN0aW9uIGV2YWxTdHJWYWx1ZShleHByKSB7XG4gIGlmIChleHByLnN0YXJ0c1dpdGgoXCIjXCIpKSByZXR1cm4gZXhwci5zbGljZSgxKTtcbiAgcmV0dXJuIGV4cHI7XG59XG5cbmV4cG9ydCB7IGV4cHJ5IH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1leHByeS5lc20uanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/expry/dist/expry.esm.js\n");

/***/ })

};
;